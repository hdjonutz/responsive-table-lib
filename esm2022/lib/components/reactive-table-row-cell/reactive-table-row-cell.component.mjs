import { Component, EventEmitter, Input, Output } from '@angular/core';
import { moveItemInArray } from '@angular/cdk/drag-drop';
import * as i0 from "@angular/core";
import * as i1 from "../../services/rows.service";
import * as i2 from "@angular/common";
import * as i3 from "@angular/cdk/drag-drop";
export class ReactiveTableRowCellComponent {
    constructor(tableBody, rowService) {
        this.rowService = rowService;
        this.rowClickIndex = null;
        this.rowsExpanded = [];
        this.onClickRow = new EventEmitter();
        this.onChangePositionRows = new EventEmitter();
        this._tableBody = tableBody;
    }
    ngOnInit() {
        this.rowsObs = this.rowService.getChanges().subscribe((res) => this.rowsExpanded = res);
    }
    ngOnDestroy() {
        this.rowsObs?.unsubscribe();
    }
    updateOnClickRow(row, cell, index, key) {
        this.rowClickIndex = index;
        this.onClickRow?.emit({ row: row, item: cell, index: index, key: key });
    }
    ngOnChanges(changes) {
        if (changes?.['data'].currentValue) {
            this.dataToDisplay = [...changes?.['data'].currentValue];
        }
    }
    drop(event) {
        moveItemInArray(this.data, event.previousIndex, event.currentIndex);
        this.onChangePositionRows?.emit(this.data);
    }
    getRowHeight(row) {
        const styleRow = { 'flex-direction': 'column' };
        if (this.config.rowHeight) {
            Object.assign(styleRow, { height: this.config.rowHeight + 'px' });
        }
        if (this.config.rowMinHeight) {
            Object.assign(styleRow, { 'min-height': this.config.rowMinHeight + 'px' });
        }
        if (this.config.rowMaxHeight) {
            Object.assign(styleRow, { 'max-height': this.config.rowMaxHeight + 'px', overflow: 'hidden' });
        }
        if (this.getIsExpanded(row) && this.rowDetail) {
            Object.assign(styleRow, { height: this.rowDetail.rowDetailHeight + 'px' });
        }
        return styleRow;
    }
    getCellWidth(att) {
        const styleCell = {};
        if (att['width'] || att['style']?.['width']) {
            Object.assign(styleCell, { width: (att['width'] || att['style']?.['width']) + 'px' });
        }
        if (att['maxWidth'] || att['style']?.['maxWidth']) {
            Object.assign(styleCell, { 'max-width': (att['maxWidth'] || att['style']?.['maxWidth']) + 'px' });
        }
        if (att['minWidth'] || att['style']?.['minWidth']) {
            Object.assign(styleCell, { 'min-width': (att['minWidth'] || att['style']?.['minWidth']) + 'px' });
        }
        if (this.config.rowMaxHeight) {
            Object.assign(styleCell, { 'max-height': this.config.rowMaxHeight + 'px' }); // 'align-items': 'baseline'
        }
        return styleCell;
    }
    getIsExpanded(row) {
        return !!this.rowsExpanded.find((r) => JSON.stringify(row) === JSON.stringify(r));
    }
    stopOnMoved(event) {
        debugger;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: ReactiveTableRowCellComponent, deps: [{ token: i0.ElementRef }, { token: i1.RowsService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: ReactiveTableRowCellComponent, selector: "app-reactive-table-row-cell", inputs: { data: "data", columns: "columns", config: "config", droggableRows: "droggableRows", rowDetail: "rowDetail" }, outputs: { onClickRow: "onClickRow", onChangePositionRows: "onChangePositionRows" }, usesOnChanges: true, ngImport: i0, template: "<div class=\"responsive_table_rows\">\n\n  <div class=\"responsive_table_header_loading\" *ngIf=\"config && dataToDisplay?.length === 0\">\n    {{config.messageTableNoData}}\n  </div>\n\n<!--  <div class=\"responsive_table_row\">-->\n<!--    <div *ngFor=\"let att of columns;\" class=\"responsive_table_row_cell\"-->\n<!--         style=\"width: {{(att['width'] || att['style']?.['width'])+'px'}};-->\n<!--            max-width: {{(att['maxWidth'] || att['style']?.['maxWidth'])+'px'}};-->\n<!--            min-width: {{(att['minWidth'] || att['style']?.['minWidth'])+'px'}}\">[xxx]</div>-->\n<!--  </div>-->\n\n  <ng-container *ngIf=\"droggableRows; then templateDroggrable; else templateSimple\"></ng-container>\n  <ng-template #templateDroggrable>\n    <div cdkDropList class=\"example-list\" (cdkDropListDropped)=\"drop($event)\">\n      <div *ngFor=\"let row of dataToDisplay; let i = index\"\n           class=\"responsive_table_row example-box\"\n           cdkDragBoundary=\"responsive_table_rows\"\n           cdkDrag\n           style=\"{{getRowHeight(row)}}\"\n           (cdkDragMoved)=\"stopOnMoved($event)\"\n           [class.selected] = \"rowClickIndex == i\"\n      >\n        <div class=\"simple_row\">\n          <ng-container *ngFor=\"let att of columns;\">\n            <div class=\"responsive_table_row_cell\"\n                 (click)=\"updateOnClickRow(row, row[att.key], i, att.key)\"\n                 style=\"{{getCellWidth(att)}}\"\n            >\n              <ng-container *ngIf=\"row[att.key] !== undefined; then _fullCell\"></ng-container>\n              <ng-template #_fullCell\n                           [ngTemplateOutlet]=\"att.cellTemplate\"\n                           [ngTemplateOutletContext]=\"{row: row, expanded: getIsExpanded(row), value: row[att.key], column: att.key, rowIndex: i}\">\n                <div *ngIf=\"!att.cellTemplate\">{{row[att.key]}}</div>\n              </ng-template>\n            </div>\n          </ng-container>\n        </div>\n\n        <div *ngIf=\"rowDetail && rowDetail.template && getIsExpanded(row)\" class=\"detail_row\" style=\"height:{{rowDetail?.rowDetailHeight+'px'}}\">\n          <ng-container [ngTemplateOutlet]=\"rowDetail.template\"\n                        [ngTemplateOutletContext]=\"{row: row, expanded: getIsExpanded(row), value: null, column: null, rowIndex: i}\"></ng-container>\n        </div>\n\n      </div>\n    </div>\n  </ng-template>\n\n  <ng-template #templateSimple>\n    <div *ngFor=\"let row of dataToDisplay; let i = index\"\n         class=\"responsive_table_row\"\n         style=\"{{getRowHeight(row)}}\"\n         [class.selected] = \"rowClickIndex == i\">\n\n      <div class=\"simple_row\">\n        <ng-container *ngFor=\"let att of columns;\">\n          <div class=\"responsive_table_row_cell\"\n               (click)=\"updateOnClickRow(row, row[att.key], i, att.key)\"\n               style=\"{{getCellWidth(att)}}\"\n          >\n            <ng-container *ngIf=\"row[att.key] !== undefined; then fullCell\"></ng-container>\n            <ng-template #fullCell\n                         [ngTemplateOutlet]=\"att.cellTemplate\"\n                         [ngTemplateOutletContext]=\"{row: row, expanded: getIsExpanded(row), value: row[att.key], column: att.key, rowIndex: i}\">\n              <div *ngIf=\"!att.cellTemplate\">{{row[att.key]}}</div>\n            </ng-template>\n          </div>\n        </ng-container>\n      </div>\n\n      <div *ngIf=\"rowDetail && rowDetail.template && getIsExpanded(row)\" class=\"detail_row\" style=\"height:{{rowDetail?.rowDetailHeight+'px'}}\">\n        <ng-container [ngTemplateOutlet]=\"rowDetail.template\"\n                      [ngTemplateOutletContext]=\"{row: row, expanded: getIsExpanded(row), value: null, column: null, rowIndex: i}\"></ng-container>\n      </div>\n\n    </div>\n\n  </ng-template>\n\n</div>\n", styles: [".flex_column,.responsive_table_rows,:host,.flex_column_min_width_height{display:flex;flex:1;flex-direction:column}.flex_row{display:flex;flex:1;flex-direction:row}.max_height_width{height:100%;width:100%;min-width:0;min-height:0}.flex_column_min_width_height{min-width:0;min-height:0}*{scrollbar-width:thin;scrollbar-color:#5287bd #DFE9EB}*::-webkit-scrollbar{height:10px;width:10px}*::-webkit-scrollbar-track{border-radius:3px;background-color:#d3d8da}*::-webkit-scrollbar-track:hover{background-color:#b8c0c2}*::-webkit-scrollbar-track:active{background-color:#b8c0c2}*::-webkit-scrollbar-thumb{border-radius:3px;background-color:#5287bd}*::-webkit-scrollbar-thumb:hover{background-color:#77a1cb}*::-webkit-scrollbar-thumb:active{background-color:#3d6e9f}:host{overflow-y:scroll;overflow-x:hidden}.responsive_table_rows .responsive_table_header_loading{display:flex;justify-content:center}.responsive_table_rows .responsive_table_row{display:flex;flex-direction:row;width:100%;border-bottom:1px solid #e9e9e9}.responsive_table_rows .responsive_table_row:nth-child(2n){background-color:#dee8f380}.responsive_table_rows .responsive_table_row:nth-child(odd){background-color:#f1f5fa80}.responsive_table_rows .responsive_table_row:hover{background-color:#c1d4e780;cursor:pointer}.responsive_table_rows .responsive_table_row.selected{background-color:#9cbad980}.responsive_table_rows .responsive_table_row .simple_row{flex-direction:row;display:flex;width:100%;height:100%}.responsive_table_rows .responsive_table_row .detail_row{box-shadow:inset 0 0 1px 1px #9cbad980;flex-direction:row;display:flex;width:100%}.responsive_table_rows .responsive_table_row .responsive_table_row_cell{display:flex;width:100%;min-width:100px;padding:2px;border-right:1px solid #e9e9e9;overflow:hidden;align-items:center;font-size:14px}.responsive_table_rows .responsive_table_row .responsive_table_row_cell.hide{visibility:hidden}.responsive_table_rows .responsive_table_row .responsive_table_row_cell:last-child{border-right:none}.responsive_table_rows .example-list .example-box{cursor:move}.responsive_table_rows .cdk-drag-preview{background-color:red;box-sizing:border-box;height:50px;display:flex;width:100%;flex-direction:row;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.responsive_table_rows .cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.responsive_table_rows .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.responsive_table_rows .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder):nth-child(2n){background-color:#e2b38e}.responsive_table_rows .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder):nth-child(odd){background-color:#e8c0a2}::ng-deep .cdk-drag{background-color:#5287bd}::ng-deep .cdk-drag.responsive_table_row.cdk-drag-preview{background-color:#bc8ce8;display:flex;border-right:1px solid #e9e9e9;overflow:hidden;align-items:center}::ng-deep .cdk-drag.responsive_table_row.cdk-drag-preview .simple_row{flex-direction:row;display:flex;width:100%;height:100%}::ng-deep .cdk-drag.responsive_table_row .responsive_table_row_cell{display:flex;width:100%;min-width:100px;padding:2px;border-right:1px solid #e9e9e9;overflow:hidden;align-items:center}::ng-deep .cdk-drag.responsive_table_row .responsive_table_row_cell.hide{visibility:hidden}::ng-deep .cdk-drag.responsive_table_row .responsive_table_row_cell:last-child{border-right:none}\n"], dependencies: [{ kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i3.CdkDropList, selector: "[cdkDropList], cdk-drop-list", inputs: ["cdkDropListConnectedTo", "cdkDropListData", "cdkDropListOrientation", "id", "cdkDropListLockAxis", "cdkDropListDisabled", "cdkDropListSortingDisabled", "cdkDropListEnterPredicate", "cdkDropListSortPredicate", "cdkDropListAutoScrollDisabled", "cdkDropListAutoScrollStep"], outputs: ["cdkDropListDropped", "cdkDropListEntered", "cdkDropListExited", "cdkDropListSorted"], exportAs: ["cdkDropList"] }, { kind: "directive", type: i3.CdkDrag, selector: "[cdkDrag]", inputs: ["cdkDragData", "cdkDragLockAxis", "cdkDragRootElement", "cdkDragBoundary", "cdkDragStartDelay", "cdkDragFreeDragPosition", "cdkDragDisabled", "cdkDragConstrainPosition", "cdkDragPreviewClass", "cdkDragPreviewContainer"], outputs: ["cdkDragStarted", "cdkDragReleased", "cdkDragEnded", "cdkDragEntered", "cdkDragExited", "cdkDragDropped", "cdkDragMoved"], exportAs: ["cdkDrag"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: ReactiveTableRowCellComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-reactive-table-row-cell', template: "<div class=\"responsive_table_rows\">\n\n  <div class=\"responsive_table_header_loading\" *ngIf=\"config && dataToDisplay?.length === 0\">\n    {{config.messageTableNoData}}\n  </div>\n\n<!--  <div class=\"responsive_table_row\">-->\n<!--    <div *ngFor=\"let att of columns;\" class=\"responsive_table_row_cell\"-->\n<!--         style=\"width: {{(att['width'] || att['style']?.['width'])+'px'}};-->\n<!--            max-width: {{(att['maxWidth'] || att['style']?.['maxWidth'])+'px'}};-->\n<!--            min-width: {{(att['minWidth'] || att['style']?.['minWidth'])+'px'}}\">[xxx]</div>-->\n<!--  </div>-->\n\n  <ng-container *ngIf=\"droggableRows; then templateDroggrable; else templateSimple\"></ng-container>\n  <ng-template #templateDroggrable>\n    <div cdkDropList class=\"example-list\" (cdkDropListDropped)=\"drop($event)\">\n      <div *ngFor=\"let row of dataToDisplay; let i = index\"\n           class=\"responsive_table_row example-box\"\n           cdkDragBoundary=\"responsive_table_rows\"\n           cdkDrag\n           style=\"{{getRowHeight(row)}}\"\n           (cdkDragMoved)=\"stopOnMoved($event)\"\n           [class.selected] = \"rowClickIndex == i\"\n      >\n        <div class=\"simple_row\">\n          <ng-container *ngFor=\"let att of columns;\">\n            <div class=\"responsive_table_row_cell\"\n                 (click)=\"updateOnClickRow(row, row[att.key], i, att.key)\"\n                 style=\"{{getCellWidth(att)}}\"\n            >\n              <ng-container *ngIf=\"row[att.key] !== undefined; then _fullCell\"></ng-container>\n              <ng-template #_fullCell\n                           [ngTemplateOutlet]=\"att.cellTemplate\"\n                           [ngTemplateOutletContext]=\"{row: row, expanded: getIsExpanded(row), value: row[att.key], column: att.key, rowIndex: i}\">\n                <div *ngIf=\"!att.cellTemplate\">{{row[att.key]}}</div>\n              </ng-template>\n            </div>\n          </ng-container>\n        </div>\n\n        <div *ngIf=\"rowDetail && rowDetail.template && getIsExpanded(row)\" class=\"detail_row\" style=\"height:{{rowDetail?.rowDetailHeight+'px'}}\">\n          <ng-container [ngTemplateOutlet]=\"rowDetail.template\"\n                        [ngTemplateOutletContext]=\"{row: row, expanded: getIsExpanded(row), value: null, column: null, rowIndex: i}\"></ng-container>\n        </div>\n\n      </div>\n    </div>\n  </ng-template>\n\n  <ng-template #templateSimple>\n    <div *ngFor=\"let row of dataToDisplay; let i = index\"\n         class=\"responsive_table_row\"\n         style=\"{{getRowHeight(row)}}\"\n         [class.selected] = \"rowClickIndex == i\">\n\n      <div class=\"simple_row\">\n        <ng-container *ngFor=\"let att of columns;\">\n          <div class=\"responsive_table_row_cell\"\n               (click)=\"updateOnClickRow(row, row[att.key], i, att.key)\"\n               style=\"{{getCellWidth(att)}}\"\n          >\n            <ng-container *ngIf=\"row[att.key] !== undefined; then fullCell\"></ng-container>\n            <ng-template #fullCell\n                         [ngTemplateOutlet]=\"att.cellTemplate\"\n                         [ngTemplateOutletContext]=\"{row: row, expanded: getIsExpanded(row), value: row[att.key], column: att.key, rowIndex: i}\">\n              <div *ngIf=\"!att.cellTemplate\">{{row[att.key]}}</div>\n            </ng-template>\n          </div>\n        </ng-container>\n      </div>\n\n      <div *ngIf=\"rowDetail && rowDetail.template && getIsExpanded(row)\" class=\"detail_row\" style=\"height:{{rowDetail?.rowDetailHeight+'px'}}\">\n        <ng-container [ngTemplateOutlet]=\"rowDetail.template\"\n                      [ngTemplateOutletContext]=\"{row: row, expanded: getIsExpanded(row), value: null, column: null, rowIndex: i}\"></ng-container>\n      </div>\n\n    </div>\n\n  </ng-template>\n\n</div>\n", styles: [".flex_column,.responsive_table_rows,:host,.flex_column_min_width_height{display:flex;flex:1;flex-direction:column}.flex_row{display:flex;flex:1;flex-direction:row}.max_height_width{height:100%;width:100%;min-width:0;min-height:0}.flex_column_min_width_height{min-width:0;min-height:0}*{scrollbar-width:thin;scrollbar-color:#5287bd #DFE9EB}*::-webkit-scrollbar{height:10px;width:10px}*::-webkit-scrollbar-track{border-radius:3px;background-color:#d3d8da}*::-webkit-scrollbar-track:hover{background-color:#b8c0c2}*::-webkit-scrollbar-track:active{background-color:#b8c0c2}*::-webkit-scrollbar-thumb{border-radius:3px;background-color:#5287bd}*::-webkit-scrollbar-thumb:hover{background-color:#77a1cb}*::-webkit-scrollbar-thumb:active{background-color:#3d6e9f}:host{overflow-y:scroll;overflow-x:hidden}.responsive_table_rows .responsive_table_header_loading{display:flex;justify-content:center}.responsive_table_rows .responsive_table_row{display:flex;flex-direction:row;width:100%;border-bottom:1px solid #e9e9e9}.responsive_table_rows .responsive_table_row:nth-child(2n){background-color:#dee8f380}.responsive_table_rows .responsive_table_row:nth-child(odd){background-color:#f1f5fa80}.responsive_table_rows .responsive_table_row:hover{background-color:#c1d4e780;cursor:pointer}.responsive_table_rows .responsive_table_row.selected{background-color:#9cbad980}.responsive_table_rows .responsive_table_row .simple_row{flex-direction:row;display:flex;width:100%;height:100%}.responsive_table_rows .responsive_table_row .detail_row{box-shadow:inset 0 0 1px 1px #9cbad980;flex-direction:row;display:flex;width:100%}.responsive_table_rows .responsive_table_row .responsive_table_row_cell{display:flex;width:100%;min-width:100px;padding:2px;border-right:1px solid #e9e9e9;overflow:hidden;align-items:center;font-size:14px}.responsive_table_rows .responsive_table_row .responsive_table_row_cell.hide{visibility:hidden}.responsive_table_rows .responsive_table_row .responsive_table_row_cell:last-child{border-right:none}.responsive_table_rows .example-list .example-box{cursor:move}.responsive_table_rows .cdk-drag-preview{background-color:red;box-sizing:border-box;height:50px;display:flex;width:100%;flex-direction:row;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.responsive_table_rows .cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.responsive_table_rows .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.responsive_table_rows .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder):nth-child(2n){background-color:#e2b38e}.responsive_table_rows .example-list.cdk-drop-list-dragging .example-box:not(.cdk-drag-placeholder):nth-child(odd){background-color:#e8c0a2}::ng-deep .cdk-drag{background-color:#5287bd}::ng-deep .cdk-drag.responsive_table_row.cdk-drag-preview{background-color:#bc8ce8;display:flex;border-right:1px solid #e9e9e9;overflow:hidden;align-items:center}::ng-deep .cdk-drag.responsive_table_row.cdk-drag-preview .simple_row{flex-direction:row;display:flex;width:100%;height:100%}::ng-deep .cdk-drag.responsive_table_row .responsive_table_row_cell{display:flex;width:100%;min-width:100px;padding:2px;border-right:1px solid #e9e9e9;overflow:hidden;align-items:center}::ng-deep .cdk-drag.responsive_table_row .responsive_table_row_cell.hide{visibility:hidden}::ng-deep .cdk-drag.responsive_table_row .responsive_table_row_cell:last-child{border-right:none}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i1.RowsService }]; }, propDecorators: { data: [{
                type: Input
            }], columns: [{
                type: Input
            }], config: [{
                type: Input
            }], droggableRows: [{
                type: Input
            }], rowDetail: [{
                type: Input
            }], onClickRow: [{
                type: Output
            }], onChangePositionRows: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhY3RpdmUtdGFibGUtcm93LWNlbGwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdGFibGUtcmVzcG9uc2l2ZS9zcmMvbGliL2NvbXBvbmVudHMvcmVhY3RpdmUtdGFibGUtcm93LWNlbGwvcmVhY3RpdmUtdGFibGUtcm93LWNlbGwuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdGFibGUtcmVzcG9uc2l2ZS9zcmMvbGliL2NvbXBvbmVudHMvcmVhY3RpdmUtdGFibGUtcm93LWNlbGwvcmVhY3RpdmUtdGFibGUtcm93LWNlbGwuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFFVCxZQUFZLEVBQ1osS0FBSyxFQUdMLE1BQU0sRUFFUCxNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQWMsZUFBZSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7Ozs7O0FBVXBFLE1BQU0sT0FBTyw2QkFBNkI7SUFrQnhDLFlBQVksU0FBcUIsRUFBVSxVQUF1QjtRQUF2QixlQUFVLEdBQVYsVUFBVSxDQUFhO1FBaEJsRSxrQkFBYSxHQUFZLElBQVcsQ0FBQztRQUNyQyxpQkFBWSxHQUFrQyxFQUFFLENBQUM7UUFTdkMsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFxRCxDQUFDO1FBQ25GLHlCQUFvQixHQUFHLElBQUksWUFBWSxFQUF5QyxDQUFDO1FBTXpGLElBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO0lBQzlCLENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFlBQVksR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxRixDQUFDO0lBQ0QsV0FBVztR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Z0JBQ0csYUFBYTtzQkFBckIsS0FBSztnQkFDRyxTQUFTO3NCQUFqQixLQUFLO2dCQUVJLFVBQVU7c0JBQW5CLE1BQU07Z0JBQ0csb0JBQW9CO3NCQUE3QixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIElucHV0LFxuICBPbkNoYW5nZXMsIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFNpbXBsZUNoYW5nZXNcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0lSZXNwb25zaXZlVGFibGVDb25maWd9IGZyb20gXCIuLi90YWJsZS1yZXNwb25zaXZlLWludGVyZmFjZVwiO1xuaW1wb3J0IHtDZGtEcmFnRHJvcCwgbW92ZUl0ZW1JbkFycmF5fSBmcm9tICdAYW5ndWxhci9jZGsvZHJhZy1kcm9wJztcbmltcG9ydCB7RGF0YXRhYmxlUm93RGV0YWlsRGlyZWN0aXZlfSBmcm9tIFwiLi4vLi4vZGlyZWN0aXZlL3Jvdy1kZXRhaWwvcm93LWRldGFpbC5kaXJlY3RpdmVcIjtcbmltcG9ydCB7Um93c1NlcnZpY2V9IGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9yb3dzLnNlcnZpY2VcIjtcbmltcG9ydCB7T2JzZXJ2YWJsZSwgU3Vic2NyaXB0aW9ufSBmcm9tIFwicnhqc1wiO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhcHAtcmVhY3RpdmUtdGFibGUtcm93LWNlbGwnLFxuICB0ZW1wbGF0ZVVybDogJy4vcmVhY3RpdmUtdGFibGUtcm93LWNlbGwuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9yZWFjdGl2ZS10YWJsZS1yb3ctY2VsbC5jb21wb25lbnQuc2NzcyddLFxufSlcbmV4cG9ydCBjbGFzcyBSZWFjdGl2ZVRhYmxlUm93Q2VsbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xuXG4gIHJvd0NsaWNrSW5kZXg6ICBudW1iZXIgPSBudWxsIGFzIGFueTtcbiAgcm93c0V4cGFuZGVkOiAgIEFycmF5PHtba2V5OiBzdHJpbmddOiBhbnl9PiA9IFtdO1xuICByb3dzT2JzITogICAgICAgU3Vic2NyaXB0aW9uO1xuXG4gIEBJbnB1dCgpIGRhdGEhOiAgICAgQXJyYXk8e1trZXk6IHN0cmluZ106IHN0cmluZ3xudW1iZXJ9PjtcbiAgQElucHV0KCkgY29sdW1ucyE6ICBBcnJheTxhbnk+O1xuICBASW5wdXQoKSBjb25maWchOiAgIElSZXNwb25zaXZlVGFibGVDb25maWc7XG4gIEBJbnB1dCgpIGRyb2dnYWJsZVJvd3MhOiBib29sZWFuO1xuICBASW5wdXQoKSByb3dEZXRhaWwhOiBEYXRhdGFibGVSb3dEZXRhaWxEaXJlY3RpdmU7XG5cbiAgQE91dHB1dCgpIG9uQ2xpY2tSb3cgPSBuZXcgRXZlbnRFbWl0dGVyPHtyb3c6IGFueTsgaXRlbTogYW55OyBpbmRleDogbnVtYmVyOyBrZXk6IHN0cmluZ30+KCk7XG4gIEBPdXRwdXQoKSBvbkNoYW5nZVBvc2l0aW9uUm93cyA9IG5ldyBFdmVudEVtaXR0ZXI8QXJyYXk8e1trZXk6IHN0cmluZ106IHN0cmluZ3xudW1iZXJ9Pj4oKTtcblxuICBfdGFibGVCb2R5ITogRWxlbWVudFJlZjtcbiAgZGF0YVRvRGlzcGxheSE6IEFycmF5PHtba2V5OiBzdHJpbmddOiBhbnl9PjtcblxuICBjb25zdHJ1Y3Rvcih0YWJsZUJvZHk6IEVsZW1lbnRSZWYsIHByaXZhdGUgcm93U2VydmljZTogUm93c1NlcnZpY2UpIHtcbiAgICB0aGlzLl90YWJsZUJvZHkgPSB0YWJsZUJvZHk7XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnJvd3NPYnMgPSB0aGlzLnJvd1NlcnZpY2UuZ2V0Q2hhbmdlcygpLnN1YnNjcmliZSgocmVzKSA9PiB0aGlzLnJvd3NFeHBhbmRlZCA9IHJlcyk7XG4gIH1cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5yb3dzT2JzPy51bnN1YnNjcmliZSgpO1xuICB9XG5cbiAgdXBkYXRlT25DbGlja1Jvdyhyb3c6IHtba2V5OiBzdHJpbmddOiBhbnl9LCBjZWxsOiB7W2tleTogc3RyaW5nXTogYW55fSwgaW5kZXg6IG51bWJlciwga2V5OiBzdHJpbmcpIHtcbiAgICB0aGlzLnJvd0NsaWNrSW5kZXggPSBpbmRleDtcbiAgICB0aGlzLm9uQ2xpY2tSb3c/LmVtaXQoe3Jvdzogcm93LCBpdGVtOiBjZWxsLCBpbmRleDogaW5kZXgsIGtleToga2V5fSk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgaWYgKGNoYW5nZXM/LlsnZGF0YSddLmN1cnJlbnRWYWx1ZSkge1xuICAgICAgdGhpcy5kYXRhVG9EaXNwbGF5ID0gWy4uLmNoYW5nZXM/LlsnZGF0YSddLmN1cnJlbnRWYWx1ZV07XG4gICAgfVxuICB9XG4gIGRyb3AoZXZlbnQ6IENka0RyYWdEcm9wPHN0cmluZ1tdPikge1xuICAgIG1vdmVJdGVtSW5BcnJheSh0aGlzLmRhdGEsIGV2ZW50LnByZXZpb3VzSW5kZXgsIGV2ZW50LmN1cnJlbnRJbmRleCk7XG4gICAgdGhpcy5vbkNoYW5nZVBvc2l0aW9uUm93cz8uZW1pdCh0aGlzLmRhdGEpO1xuICB9XG5cbiAgZ2V0Um93SGVpZ2h0KHJvdzoge1trZXk6IHN0cmluZ106IGFueX0pOiBhbnkge1xuICAgIGNvbnN0IHN0eWxlUm93ID0geydmbGV4LWRpcmVjdGlvbic6ICdjb2x1bW4nfTtcbiAgICBpZiAodGhpcy5jb25maWcucm93SGVpZ2h0KSB7XG4gICAgICBPYmplY3QuYXNzaWduKHN0eWxlUm93LCB7aGVpZ2h0OiB0aGlzLmNvbmZpZy5yb3dIZWlnaHQgKyAncHgnfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbmZpZy5yb3dNaW5IZWlnaHQpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24oc3R5bGVSb3csIHsnbWluLWhlaWdodCc6IHRoaXMuY29uZmlnLnJvd01pbkhlaWdodCArICdweCd9KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY29uZmlnLnJvd01heEhlaWdodCkge1xuICAgICAgT2JqZWN0LmFzc2lnbihzdHlsZVJvdywgeydtYXgtaGVpZ2h0JzogdGhpcy5jb25maWcucm93TWF4SGVpZ2h0ICsgJ3B4Jywgb3ZlcmZsb3c6ICdoaWRkZW4nfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmdldElzRXhwYW5kZWQocm93KSAmJiB0aGlzLnJvd0RldGFpbCkge1xuICAgICAgT2JqZWN0LmFzc2lnbihzdHlsZVJvdywge2hlaWdodDogdGhpcy5yb3dEZXRhaWwucm93RGV0YWlsSGVpZ2h0ICsgJ3B4J30pO1xuICAgIH1cbiAgICByZXR1cm4gc3R5bGVSb3c7XG4gIH1cblxuICBnZXRDZWxsV2lkdGgoYXR0OiB7W2tleTogc3RyaW5nXTogYW55fSk6IGFueSB7XG4gICAgY29uc3Qgc3R5bGVDZWxsID0ge307XG4gICAgaWYgKGF0dFsnd2lkdGgnXSB8fCBhdHRbJ3N0eWxlJ10/Llsnd2lkdGgnXSkge1xuICAgICAgT2JqZWN0LmFzc2lnbihzdHlsZUNlbGwsIHt3aWR0aDogKGF0dFsnd2lkdGgnXSB8fCBhdHRbJ3N0eWxlJ10/Llsnd2lkdGgnXSkgKyAncHgnfSk7XG4gICAgfVxuICAgIGlmIChhdHRbJ21heFdpZHRoJ10gfHwgYXR0WydzdHlsZSddPy5bJ21heFdpZHRoJ10pIHtcbiAgICAgIE9iamVjdC5hc3NpZ24oc3R5bGVDZWxsLCB7J21heC13aWR0aCc6IChhdHRbJ21heFdpZHRoJ10gfHwgYXR0WydzdHlsZSddPy5bJ21heFdpZHRoJ10pICsgJ3B4J30pO1xuICAgIH1cbiAgICBpZiAoYXR0WydtaW5XaWR0aCddIHx8IGF0dFsnc3R5bGUnXT8uWydtaW5XaWR0aCddKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHN0eWxlQ2VsbCwgeydtaW4td2lkdGgnOiAoYXR0WydtaW5XaWR0aCddIHx8IGF0dFsnc3R5bGUnXT8uWydtaW5XaWR0aCddKSArICdweCd9KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY29uZmlnLnJvd01heEhlaWdodCkge1xuICAgICAgT2JqZWN0LmFzc2lnbihzdHlsZUNlbGwsIHsnbWF4LWhlaWdodCc6IHRoaXMuY29uZmlnLnJvd01heEhlaWdodCArICdweCd9KTsgLy8gJ2FsaWduLWl0ZW1zJzogJ2Jhc2VsaW5lJ1xuICAgIH1cbiAgICByZXR1cm4gc3R5bGVDZWxsO1xuICB9XG5cbiAgZ2V0SXNFeHBhbmRlZChyb3c6IHtba2V5OiBzdHJpbmddOiBhbnl9KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5yb3dzRXhwYW5kZWQuZmluZCgocikgPT4gSlNPTi5zdHJpbmdpZnkocm93KSA9PT0gSlNPTi5zdHJpbmdpZnkocikpO1xuICB9XG5cbiAgc3RvcE9uTW92ZWQoZXZlbnQ6IGFueSkge1xuICAgIGRlYnVnZ2VyO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwicmVzcG9uc2l2ZV90YWJsZV9yb3dzXCI+XG5cbiAgPGRpdiBjbGFzcz1cInJlc3BvbnNpdmVfdGFibGVfaGVhZGVyX2xvYWRpbmdcIiAqbmdJZj1cImNvbmZpZyAmJiBkYXRhVG9EaXNwbGF5Py5sZW5ndGggPT09IDBcIj5cbiAgICB7e2NvbmZpZy5tZXNzYWdlVGFibGVOb0RhdGF9fVxuICA8L2Rpdj5cblxuPCEtLSAgPGRpdiBjbGFzcz1cInJlc3BvbnNpdmVfdGFibGVfcm93XCI+LS0+XG48IS0tICAgIDxkaXYgKm5nRm9yPVwibGV0IGF0dCBvZiBjb2x1bW5zO1wiIGNsYXNzPVwicmVzcG9uc2l2ZV90YWJsZV9yb3dfY2VsbFwiLS0+XG48IS0tICAgICAgICAgc3R5bGU9XCJ3aWR0aDoge3soYXR0Wyd3aWR0aCddIHx8IGF0dFsnc3R5bGUnXT8uWyd3aWR0aCddKSsncHgnfX07LS0+XG48IS0tICAgICAgICAgICAgbWF4LXdpZHRoOiB7eyhhdHRbJ21heFdpZHRoJ10gfHwgYXR0WydzdHlsZSddPy5bJ21heFdpZHRoJ10pKydweCd9fTstLT5cbjwhLS0gICAgICAgICAgICBtaW4td2lkdGg6IHt7KGF0dFsnbWluV2lkdGgnXSB8fCBhdHRbJ3N0eWxlJ10/LlsnbWluV2lkdGgnXSkrJ3B4J319XCI+W3h4eF08L2Rpdj4tLT5cbjwhLS0gIDwvZGl2Pi0tPlxuXG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCJkcm9nZ2FibGVSb3dzOyB0aGVuIHRlbXBsYXRlRHJvZ2dyYWJsZTsgZWxzZSB0ZW1wbGF0ZVNpbXBsZVwiPjwvbmctY29udGFpbmVyPlxuICA8bmctdGVtcGxhdGUgI3RlbXBsYXRlRHJvZ2dyYWJsZT5cbiAgICA8ZGl2IGNka0Ryb3BMaXN0IGNsYXNzPVwiZXhhbXBsZS1saXN0XCIgKGNka0Ryb3BMaXN0RHJvcHBlZCk9XCJkcm9wKCRldmVudClcIj5cbiAgICAgIDxkaXYgKm5nRm9yPVwibGV0IHJvdyBvZiBkYXRhVG9EaXNwbGF5OyBsZXQgaSA9IGluZGV4XCJcbiAgICAgICAgICAgY2xhc3M9XCJyZXNwb25zaXZlX3RhYmxlX3JvdyBleGFtcGxlLWJveFwiXG4gICAgICAgICAgIGNka0RyYWdCb3VuZGFyeT1cInJlc3BvbnNpdmVfdGFibGVfcm93c1wiXG4gICAgICAgICAgIGNka0RyYWdcbiAgICAgICAgICAgc3R5bGU9XCJ7e2dldFJvd0hlaWdodChyb3cpfX1cIlxuICAgICAgICAgICAoY2RrRHJhZ01vdmVkKT1cInN0b3BPbk1vdmVkKCRldmVudClcIlxuICAgICAgICAgICBbY2xhc3Muc2VsZWN0ZWRdID0gXCJyb3dDbGlja0luZGV4ID09IGlcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2ltcGxlX3Jvd1wiPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGF0dCBvZiBjb2x1bW5zO1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJlc3BvbnNpdmVfdGFibGVfcm93X2NlbGxcIlxuICAgICAgICAgICAgICAgICAoY2xpY2spPVwidXBkYXRlT25DbGlja1Jvdyhyb3csIHJvd1thdHQua2V5XSwgaSwgYXR0LmtleSlcIlxuICAgICAgICAgICAgICAgICBzdHlsZT1cInt7Z2V0Q2VsbFdpZHRoKGF0dCl9fVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJyb3dbYXR0LmtleV0gIT09IHVuZGVmaW5lZDsgdGhlbiBfZnVsbENlbGxcIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNfZnVsbENlbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImF0dC5jZWxsVGVtcGxhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cIntyb3c6IHJvdywgZXhwYW5kZWQ6IGdldElzRXhwYW5kZWQocm93KSwgdmFsdWU6IHJvd1thdHQua2V5XSwgY29sdW1uOiBhdHQua2V5LCByb3dJbmRleDogaX1cIj5cbiAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiIWF0dC5jZWxsVGVtcGxhdGVcIj57e3Jvd1thdHQua2V5XX19PC9kaXY+XG4gICAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiAqbmdJZj1cInJvd0RldGFpbCAmJiByb3dEZXRhaWwudGVtcGxhdGUgJiYgZ2V0SXNFeHBhbmRlZChyb3cpXCIgY2xhc3M9XCJkZXRhaWxfcm93XCIgc3R5bGU9XCJoZWlnaHQ6e3tyb3dEZXRhaWw/LnJvd0RldGFpbEhlaWdodCsncHgnfX1cIj5cbiAgICAgICAgICA8bmctY29udGFpbmVyIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInJvd0RldGFpbC50ZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwie3Jvdzogcm93LCBleHBhbmRlZDogZ2V0SXNFeHBhbmRlZChyb3cpLCB2YWx1ZTogbnVsbCwgY29sdW1uOiBudWxsLCByb3dJbmRleDogaX1cIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L25nLXRlbXBsYXRlPlxuXG4gIDxuZy10ZW1wbGF0ZSAjdGVtcGxhdGVTaW1wbGU+XG4gICAgPGRpdiAqbmdGb3I9XCJsZXQgcm93IG9mIGRhdGFUb0Rpc3BsYXk7IGxldCBpID0gaW5kZXhcIlxuICAgICAgICAgY2xhc3M9XCJyZXNwb25zaXZlX3RhYmxlX3Jvd1wiXG4gICAgICAgICBzdHlsZT1cInt7Z2V0Um93SGVpZ2h0KHJvdyl9fVwiXG4gICAgICAgICBbY2xhc3Muc2VsZWN0ZWRdID0gXCJyb3dDbGlja0luZGV4ID09IGlcIj5cblxuICAgICAgPGRpdiBjbGFzcz1cInNpbXBsZV9yb3dcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgYXR0IG9mIGNvbHVtbnM7XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInJlc3BvbnNpdmVfdGFibGVfcm93X2NlbGxcIlxuICAgICAgICAgICAgICAgKGNsaWNrKT1cInVwZGF0ZU9uQ2xpY2tSb3cocm93LCByb3dbYXR0LmtleV0sIGksIGF0dC5rZXkpXCJcbiAgICAgICAgICAgICAgIHN0eWxlPVwie3tnZXRDZWxsV2lkdGgoYXR0KX19XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwicm93W2F0dC5rZXldICE9PSB1bmRlZmluZWQ7IHRoZW4gZnVsbENlbGxcIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjZnVsbENlbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJhdHQuY2VsbFRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwie3Jvdzogcm93LCBleHBhbmRlZDogZ2V0SXNFeHBhbmRlZChyb3cpLCB2YWx1ZTogcm93W2F0dC5rZXldLCBjb2x1bW46IGF0dC5rZXksIHJvd0luZGV4OiBpfVwiPlxuICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiIWF0dC5jZWxsVGVtcGxhdGVcIj57e3Jvd1thdHQua2V5XX19PC9kaXY+XG4gICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2ICpuZ0lmPVwicm93RGV0YWlsICYmIHJvd0RldGFpbC50ZW1wbGF0ZSAmJiBnZXRJc0V4cGFuZGVkKHJvdylcIiBjbGFzcz1cImRldGFpbF9yb3dcIiBzdHlsZT1cImhlaWdodDp7e3Jvd0RldGFpbD8ucm93RGV0YWlsSGVpZ2h0KydweCd9fVwiPlxuICAgICAgICA8bmctY29udGFpbmVyIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInJvd0RldGFpbC50ZW1wbGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cIntyb3c6IHJvdywgZXhwYW5kZWQ6IGdldElzRXhwYW5kZWQocm93KSwgdmFsdWU6IG51bGwsIGNvbHVtbjogbnVsbCwgcm93SW5kZXg6IGl9XCI+PC9uZy1jb250YWluZXI+XG4gICAgICA8L2Rpdj5cblxuICAgIDwvZGl2PlxuXG4gIDwvbmctdGVtcGxhdGU+XG5cbjwvZGl2PlxuIl19