import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { IStates } from "../table-responsive-interface";
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class TableHeaderComponent {
    constructor() {
        this.IStates = IStates;
        this.selectToAction = {};
        this.stateFilterText = {};
        this.selectionType = 'simple';
        this.select = new EventEmitter();
        this.onInputTextKey = new EventEmitter();
        this.onInputSortKey = new EventEmitter();
        this.addItem = new EventEmitter();
        this.refresh = new EventEmitter();
    }
    ngOnInit() {
        this.columns.forEach((k) => {
            this.selectToAction[k.key] = IStates.Nothing;
            this.stateFilterText[k.key] = '';
        });
        debugger;
    }
    ngAfterViewInit() {
        // column
        // key:  "....."
        // name: "...."
        // maxWidth:            100
        // minWidth:            30
        // remainingAutoFill:   false
        // width:               50
        console.log(this.headerRef);
        const width = this.headerRef?.nativeElement.clientWidth;
        this.columns;
        debugger;
    }
    changeTo(nameAction, key) {
        this.selectToAction[key] = nameAction;
        this.onInputSortKey.emit({ direction: nameAction, key: key });
    }
    updateFilterText(event, key) {
        const val = event.target.value;
        this.stateFilterText[key] = val;
        this.onInputTextKey.emit({ value: val, key: key });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TableHeaderComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: TableHeaderComponent, selector: "app-table-header", inputs: { columns: "columns", headerHeight: "headerHeight", allRowsSelected: "allRowsSelected", selectionType: "selectionType", droggableColumns: "droggableColumns" }, outputs: { select: "select", onInputTextKey: "onInputTextKey", onInputSortKey: "onInputSortKey", addItem: "addItem", refresh: "refresh" }, viewQueries: [{ propertyName: "headerRef", first: true, predicate: ["headerRefElement"], descendants: true }], ngImport: i0, template: "<div class=\"responsive_table_header\" style=\"{{headerHeight ? {'height': headerHeight+'px'} : ''}}\" #headerRefElement>\r\n\r\n  <div *ngFor=\"let att of columns; let i = index\"\r\n       class=\"column_responsive_table_header\"\r\n       style=\"width: {{(att['width'] || att['style']?.['width'])+'px'}};\r\n              max-width: {{(att['maxWidth'] || att['style']?.['maxWidth'])+'px'}};\r\n              min-width: {{(att['minWidth'] || att['style']?.['minWidth'])+'px'}}\">\r\n    <div class=\"header_title\">{{att['name']}} &nbsp;</div>\r\n\r\n\r\n    <div class=\"header_inputs_filter_sort\">\r\n      <ng-container *ngIf=\"att['key'] !=='' && !att['_headerTemplateInput']; then headFilter; else noKeyPropButtons\"></ng-container>\r\n      <ng-template #headFilter>\r\n        <div class=\"inputFilterText\">\r\n          <input value=\"{{stateFilterText[att['key']]}}\" (keyup)=\"updateFilterText($event, att['key'])\">\r\n        </div>\r\n        <div class=\"inputSortText\">\r\n\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.SmallerToBigger)\"\r\n               (click)=\"changeTo(IStates.Nothing, att['key'])\">\u25B2</div>\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.BiggerToSmaller)\"\r\n               (click)=\"changeTo(IStates.SmallerToBigger, att['key'])\">\u25BC</div>\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.Nothing)\"\r\n               (click)=\"changeTo(IStates.BiggerToSmaller, att['key'])\" style=\"font-size: 15px\">\u25A1</div>\r\n        </div>\r\n      </ng-template>\r\n      <ng-template #noKeyPropButtons [ngTemplateOutlet]=\"att['_headerTemplateInput']\"></ng-template>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: [".flex_column,.flex_column_min_width_height{display:flex;flex:1;flex-direction:column}.flex_row{display:flex;flex:1;flex-direction:row}.max_height_width{height:100%;width:100%;min-width:0;min-height:0}.flex_column_min_width_height{min-width:0;min-height:0}*{scrollbar-width:thin;scrollbar-color:#5287bd #DFE9EB}*::-webkit-scrollbar{height:10px;width:10px}*::-webkit-scrollbar-track{border-radius:3px;background-color:#d3d8da}*::-webkit-scrollbar-track:hover{background-color:#b8c0c2}*::-webkit-scrollbar-track:active{background-color:#b8c0c2}*::-webkit-scrollbar-thumb{border-radius:3px;background-color:#5287bd}*::-webkit-scrollbar-thumb:hover{background-color:#77a1cb}*::-webkit-scrollbar-thumb:active{background-color:#3d6e9f}:host{display:flex;flex-direction:row;padding-right:11px;background-color:#5287bd;border-bottom:1px solid #ffffff;overflow:hidden}.allCenter,.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle,.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText{justify-content:center;align-items:center;justify-items:center;text-align:center}.responsive_table_header{display:flex;color:#fff;width:100%}.responsive_table_header .column_responsive_table_header{display:flex;flex-direction:column;border-right:1px solid #ffffff;padding:2px;overflow:hidden;width:100%}.responsive_table_header .column_responsive_table_header:last-child{border-right:0}.responsive_table_header .column_responsive_table_header .header_title{display:flex;height:100%;font-size:12px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort{display:flex;flex-direction:row}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputFilterText{display:flex}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputFilterText input{width:100%;height:15px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText{display:flex;flex-direction:column;padding:0 2px;font-size:10px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle{display:flex;color:#fff;margin-bottom:5px;height:15px;width:9px;padding-bottom:5px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle.hide{display:none}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle:hover{color:#fff;cursor:pointer}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .header_buttons mat-icon{background-color:#888;margin-right:2px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .header_buttons mat-icon:hover{cursor:pointer;background-color:#e9e9e9}\n"], dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TableHeaderComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-table-header', template: "<div class=\"responsive_table_header\" style=\"{{headerHeight ? {'height': headerHeight+'px'} : ''}}\" #headerRefElement>\r\n\r\n  <div *ngFor=\"let att of columns; let i = index\"\r\n       class=\"column_responsive_table_header\"\r\n       style=\"width: {{(att['width'] || att['style']?.['width'])+'px'}};\r\n              max-width: {{(att['maxWidth'] || att['style']?.['maxWidth'])+'px'}};\r\n              min-width: {{(att['minWidth'] || att['style']?.['minWidth'])+'px'}}\">\r\n    <div class=\"header_title\">{{att['name']}} &nbsp;</div>\r\n\r\n\r\n    <div class=\"header_inputs_filter_sort\">\r\n      <ng-container *ngIf=\"att['key'] !=='' && !att['_headerTemplateInput']; then headFilter; else noKeyPropButtons\"></ng-container>\r\n      <ng-template #headFilter>\r\n        <div class=\"inputFilterText\">\r\n          <input value=\"{{stateFilterText[att['key']]}}\" (keyup)=\"updateFilterText($event, att['key'])\">\r\n        </div>\r\n        <div class=\"inputSortText\">\r\n\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.SmallerToBigger)\"\r\n               (click)=\"changeTo(IStates.Nothing, att['key'])\">\u25B2</div>\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.BiggerToSmaller)\"\r\n               (click)=\"changeTo(IStates.SmallerToBigger, att['key'])\">\u25BC</div>\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.Nothing)\"\r\n               (click)=\"changeTo(IStates.BiggerToSmaller, att['key'])\" style=\"font-size: 15px\">\u25A1</div>\r\n        </div>\r\n      </ng-template>\r\n      <ng-template #noKeyPropButtons [ngTemplateOutlet]=\"att['_headerTemplateInput']\"></ng-template>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: [".flex_column,.flex_column_min_width_height{display:flex;flex:1;flex-direction:column}.flex_row{display:flex;flex:1;flex-direction:row}.max_height_width{height:100%;width:100%;min-width:0;min-height:0}.flex_column_min_width_height{min-width:0;min-height:0}*{scrollbar-width:thin;scrollbar-color:#5287bd #DFE9EB}*::-webkit-scrollbar{height:10px;width:10px}*::-webkit-scrollbar-track{border-radius:3px;background-color:#d3d8da}*::-webkit-scrollbar-track:hover{background-color:#b8c0c2}*::-webkit-scrollbar-track:active{background-color:#b8c0c2}*::-webkit-scrollbar-thumb{border-radius:3px;background-color:#5287bd}*::-webkit-scrollbar-thumb:hover{background-color:#77a1cb}*::-webkit-scrollbar-thumb:active{background-color:#3d6e9f}:host{display:flex;flex-direction:row;padding-right:11px;background-color:#5287bd;border-bottom:1px solid #ffffff;overflow:hidden}.allCenter,.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle,.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText{justify-content:center;align-items:center;justify-items:center;text-align:center}.responsive_table_header{display:flex;color:#fff;width:100%}.responsive_table_header .column_responsive_table_header{display:flex;flex-direction:column;border-right:1px solid #ffffff;padding:2px;overflow:hidden;width:100%}.responsive_table_header .column_responsive_table_header:last-child{border-right:0}.responsive_table_header .column_responsive_table_header .header_title{display:flex;height:100%;font-size:12px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort{display:flex;flex-direction:row}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputFilterText{display:flex}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputFilterText input{width:100%;height:15px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText{display:flex;flex-direction:column;padding:0 2px;font-size:10px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle{display:flex;color:#fff;margin-bottom:5px;height:15px;width:9px;padding-bottom:5px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle.hide{display:none}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle:hover{color:#fff;cursor:pointer}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .header_buttons mat-icon{background-color:#888;margin-right:2px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .header_buttons mat-icon:hover{cursor:pointer;background-color:#e9e9e9}\n"] }]
        }], ctorParameters: function () { return []; }, propDecorators: { columns: [{
                type: Input
            }], headerHeight: [{
                type: Input
            }], allRowsSelected: [{
                type: Input
            }], selectionType: [{
                type: Input
            }], droggableColumns: [{
                type: Input
            }], select: [{
                type: Output
            }], onInputTextKey: [{
                type: Output
            }], onInputSortKey: [{
                type: Output
            }], addItem: [{
                type: Output
            }], refresh: [{
                type: Output
            }], headerRef: [{
                type: ViewChild,
                args: ['headerRefElement']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3RhYmxlLXJlc3BvbnNpdmUvc3JjL2xpYi9jb21wb25lbnRzL3RhYmxlLWhlYWRlci90YWJsZS1oZWFkZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdGFibGUtcmVzcG9uc2l2ZS9zcmMvbGliL2NvbXBvbmVudHMvdGFibGUtaGVhZGVyL3RhYmxlLWhlYWRlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBRUwsU0FBUyxFQUVULFlBQVksRUFDWixLQUFLLEVBRUwsTUFBTSxFQUNOLFNBQVMsRUFFVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sK0JBQStCLENBQUM7OztBQVF0RCxNQUFNLE9BQU8sb0JBQW9CO0lBc0IvQjtRQXJCbUIsWUFBTyxHQUFHLE9BQU8sQ0FBQztRQUVyQyxtQkFBYyxHQUE2QixFQUFFLENBQUM7UUFDOUMsb0JBQWUsR0FBNEIsRUFBRSxDQUFDO1FBS3JDLGtCQUFhLEdBQXFCLFFBQVEsQ0FBQztRQUkxQyxXQUFNLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDL0MsbUJBQWMsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ3BDLG1CQUFjLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUVwQyxZQUFPLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUM3QixZQUFPLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztJQUl4QixDQUFDO0lBRWhCLFFBQVE7UUFDTixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQStCLEVBQUUsRUFBRTtZQUN2RCxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO1lBQzdDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztRQUNILFFBQVEsQ0FBQztJQUNYLENBQUM7SUFFRCxlQUFlO1FBQ2IsU0FBUztRQUNULGdCQUFnQjtRQUNoQixlQUFlO1FBQ2YsMkJBQTJCO1FBQzNCLDBCQUEwQjtRQUMxQiw2QkFBNkI7UUFDN0IsMEJBQTBCO1FBRTFCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzVCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsYUFBYSxDQUFDLFdBQVcsQ0FBQztRQUN4RCxJQUFJLENBQUMsT0FBTyxDQUFBO1FBQ1osUUFBUSxDQUFDO0lBQ1gsQ0FBQztJQUVELFFBQVEsQ0FBQyxVQUFtQixFQUFFLEdBQVc7UUFDdkMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsR0FBRyxVQUFVLENBQUM7UUFDdEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUMsQ0FBQyxDQUFDO0lBQzlELENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxLQUFvQixFQUFFLEdBQVc7UUFDaEQsTUFBTSxHQUFHLEdBQUksS0FBSyxDQUFDLE1BQWMsQ0FBQyxLQUFLLENBQUM7UUFDeEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDaEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUMsQ0FBQyxDQUFDO0lBQ25ELENBQUM7K0dBeERVLG9CQUFvQjttR0FBcEIsb0JBQW9CLDBkQ25CakMsdTBEQWlDQTs7NEZEZGEsb0JBQW9CO2tCQUxoQyxTQUFTOytCQUNFLGtCQUFrQjswRUFVbkIsT0FBTztzQkFBZixLQUFLO2dCQUNHLFlBQVk7c0JBQXBCLEtBQUs7Z0JBQ0csZUFBZTtzQkFBdkIsS0FBSztnQkFDRyxhQUFhO3NCQUFyQixLQUFLO2dCQUNHLGdCQUFnQjtzQkFBeEIsS0FBSztnQkFHSSxNQUFNO3NCQUFmLE1BQU07Z0JBQ0csY0FBYztzQkFBdkIsTUFBTTtnQkFDRyxjQUFjO3NCQUF2QixNQUFNO2dCQUVHLE9BQU87c0JBQWhCLE1BQU07Z0JBQ0csT0FBTztzQkFBaEIsTUFBTTtnQkFHd0IsU0FBUztzQkFBdkMsU0FBUzt1QkFBQyxrQkFBa0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgQ29tcG9uZW50LFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIElucHV0LFxyXG4gIE9uSW5pdCxcclxuICBPdXRwdXQsXHJcbiAgVmlld0NoaWxkLFxyXG4gIFZpZXdDb250YWluZXJSZWZcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtJU3RhdGVzfSBmcm9tIFwiLi4vdGFibGUtcmVzcG9uc2l2ZS1pbnRlcmZhY2VcIjtcclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC10YWJsZS1oZWFkZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi90YWJsZS1oZWFkZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3RhYmxlLWhlYWRlci5jb21wb25lbnQuc2NzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgVGFibGVIZWFkZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG4gIHByb3RlY3RlZCByZWFkb25seSBJU3RhdGVzID0gSVN0YXRlcztcclxuXHJcbiAgc2VsZWN0VG9BY3Rpb246IHtba2V5OiBzdHJpbmddOiBJU3RhdGVzfSA9IHt9O1xyXG4gIHN0YXRlRmlsdGVyVGV4dDoge1trZXk6IHN0cmluZ106IHN0cmluZ30gPSB7fTtcclxuXHJcbiAgQElucHV0KCkgY29sdW1ucyE6IEFycmF5PGFueT47XHJcbiAgQElucHV0KCkgaGVhZGVySGVpZ2h0ITogbnVtYmVyO1xyXG4gIEBJbnB1dCgpIGFsbFJvd3NTZWxlY3RlZCE6IEFycmF5PGFueT47XHJcbiAgQElucHV0KCkgc2VsZWN0aW9uVHlwZTogJ3NpbXBsZSd8J211bHRpJyA9ICdzaW1wbGUnO1xyXG4gIEBJbnB1dCgpIGRyb2dnYWJsZUNvbHVtbnMhOiBib29sZWFuO1xyXG5cclxuXHJcbiAgQE91dHB1dCgpIHNlbGVjdDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgQE91dHB1dCgpIG9uSW5wdXRUZXh0S2V5ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSBvbklucHV0U29ydEtleSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgQE91dHB1dCgpIGFkZEl0ZW0gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgQE91dHB1dCgpIHJlZnJlc2ggPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIC8vIEBWaWV3Q2hpbGQgKCdoZWFkZXJSZWZFbGVtZW50JywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmLCBzdGF0aWM6IGZhbHNlIH0pIGhlYWRlclJlZjogVmlld0NvbnRhaW5lclJlZiB8IHVuZGVmaW5lZDtcclxuICBAVmlld0NoaWxkKCdoZWFkZXJSZWZFbGVtZW50JykgaGVhZGVyUmVmPzogRWxlbWVudFJlZjtcclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5jb2x1bW5zLmZvckVhY2goKGs6IHtrZXk6IHN0cmluZzsgdGl0bGU6IHN0cmluZ30pID0+IHtcclxuICAgICAgdGhpcy5zZWxlY3RUb0FjdGlvbltrLmtleV0gPSBJU3RhdGVzLk5vdGhpbmc7XHJcbiAgICAgIHRoaXMuc3RhdGVGaWx0ZXJUZXh0W2sua2V5XSA9ICcnO1xyXG4gICAgfSk7XHJcbiAgICBkZWJ1Z2dlcjtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIC8vIGNvbHVtblxyXG4gICAgLy8ga2V5OiAgXCIuLi4uLlwiXHJcbiAgICAvLyBuYW1lOiBcIi4uLi5cIlxyXG4gICAgLy8gbWF4V2lkdGg6ICAgICAgICAgICAgMTAwXHJcbiAgICAvLyBtaW5XaWR0aDogICAgICAgICAgICAzMFxyXG4gICAgLy8gcmVtYWluaW5nQXV0b0ZpbGw6ICAgZmFsc2VcclxuICAgIC8vIHdpZHRoOiAgICAgICAgICAgICAgIDUwXHJcblxyXG4gICAgY29uc29sZS5sb2codGhpcy5oZWFkZXJSZWYpO1xyXG4gICAgY29uc3Qgd2lkdGggPSB0aGlzLmhlYWRlclJlZj8ubmF0aXZlRWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgIHRoaXMuY29sdW1uc1xyXG4gICAgZGVidWdnZXI7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VUbyhuYW1lQWN0aW9uOiBJU3RhdGVzLCBrZXk6IHN0cmluZykge1xyXG4gICAgdGhpcy5zZWxlY3RUb0FjdGlvbltrZXldID0gbmFtZUFjdGlvbjtcclxuICAgIHRoaXMub25JbnB1dFNvcnRLZXkuZW1pdCh7ZGlyZWN0aW9uOiBuYW1lQWN0aW9uLCBrZXk6IGtleX0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlRmlsdGVyVGV4dChldmVudDogS2V5Ym9hcmRFdmVudCwga2V5OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHZhbCA9IChldmVudC50YXJnZXQgYXMgYW55KS52YWx1ZTtcclxuICAgIHRoaXMuc3RhdGVGaWx0ZXJUZXh0W2tleV0gPSB2YWw7XHJcbiAgICB0aGlzLm9uSW5wdXRUZXh0S2V5LmVtaXQoe3ZhbHVlOiB2YWwsIGtleToga2V5fSk7XHJcbiAgfVxyXG59XHJcbiIsIjxkaXYgY2xhc3M9XCJyZXNwb25zaXZlX3RhYmxlX2hlYWRlclwiIHN0eWxlPVwie3toZWFkZXJIZWlnaHQgPyB7J2hlaWdodCc6IGhlYWRlckhlaWdodCsncHgnfSA6ICcnfX1cIiAjaGVhZGVyUmVmRWxlbWVudD5cclxuXHJcbiAgPGRpdiAqbmdGb3I9XCJsZXQgYXR0IG9mIGNvbHVtbnM7IGxldCBpID0gaW5kZXhcIlxyXG4gICAgICAgY2xhc3M9XCJjb2x1bW5fcmVzcG9uc2l2ZV90YWJsZV9oZWFkZXJcIlxyXG4gICAgICAgc3R5bGU9XCJ3aWR0aDoge3soYXR0Wyd3aWR0aCddIHx8IGF0dFsnc3R5bGUnXT8uWyd3aWR0aCddKSsncHgnfX07XHJcbiAgICAgICAgICAgICAgbWF4LXdpZHRoOiB7eyhhdHRbJ21heFdpZHRoJ10gfHwgYXR0WydzdHlsZSddPy5bJ21heFdpZHRoJ10pKydweCd9fTtcclxuICAgICAgICAgICAgICBtaW4td2lkdGg6IHt7KGF0dFsnbWluV2lkdGgnXSB8fCBhdHRbJ3N0eWxlJ10/LlsnbWluV2lkdGgnXSkrJ3B4J319XCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyX3RpdGxlXCI+e3thdHRbJ25hbWUnXX19ICZuYnNwOzwvZGl2PlxyXG5cclxuXHJcbiAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyX2lucHV0c19maWx0ZXJfc29ydFwiPlxyXG4gICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiYXR0WydrZXknXSAhPT0nJyAmJiAhYXR0WydfaGVhZGVyVGVtcGxhdGVJbnB1dCddOyB0aGVuIGhlYWRGaWx0ZXI7IGVsc2Ugbm9LZXlQcm9wQnV0dG9uc1wiPjwvbmctY29udGFpbmVyPlxyXG4gICAgICA8bmctdGVtcGxhdGUgI2hlYWRGaWx0ZXI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0RmlsdGVyVGV4dFwiPlxyXG4gICAgICAgICAgPGlucHV0IHZhbHVlPVwie3tzdGF0ZUZpbHRlclRleHRbYXR0WydrZXknXV19fVwiIChrZXl1cCk9XCJ1cGRhdGVGaWx0ZXJUZXh0KCRldmVudCwgYXR0WydrZXknXSlcIj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXRTb3J0VGV4dFwiPlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzb3J0VHJpYW5nbGVcIlxyXG4gICAgICAgICAgICAgICBbY2xhc3MuaGlkZV09XCIhKHNlbGVjdFRvQWN0aW9uW2F0dFsna2V5J11dID09PSBJU3RhdGVzLlNtYWxsZXJUb0JpZ2dlcilcIlxyXG4gICAgICAgICAgICAgICAoY2xpY2spPVwiY2hhbmdlVG8oSVN0YXRlcy5Ob3RoaW5nLCBhdHRbJ2tleSddKVwiPuKWsjwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNvcnRUcmlhbmdsZVwiXHJcbiAgICAgICAgICAgICAgIFtjbGFzcy5oaWRlXT1cIiEoc2VsZWN0VG9BY3Rpb25bYXR0WydrZXknXV0gPT09IElTdGF0ZXMuQmlnZ2VyVG9TbWFsbGVyKVwiXHJcbiAgICAgICAgICAgICAgIChjbGljayk9XCJjaGFuZ2VUbyhJU3RhdGVzLlNtYWxsZXJUb0JpZ2dlciwgYXR0WydrZXknXSlcIj7ilrw8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzb3J0VHJpYW5nbGVcIlxyXG4gICAgICAgICAgICAgICBbY2xhc3MuaGlkZV09XCIhKHNlbGVjdFRvQWN0aW9uW2F0dFsna2V5J11dID09PSBJU3RhdGVzLk5vdGhpbmcpXCJcclxuICAgICAgICAgICAgICAgKGNsaWNrKT1cImNoYW5nZVRvKElTdGF0ZXMuQmlnZ2VyVG9TbWFsbGVyLCBhdHRbJ2tleSddKVwiIHN0eWxlPVwiZm9udC1zaXplOiAxNXB4XCI+4pahPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICAgIDxuZy10ZW1wbGF0ZSAjbm9LZXlQcm9wQnV0dG9ucyBbbmdUZW1wbGF0ZU91dGxldF09XCJhdHRbJ19oZWFkZXJUZW1wbGF0ZUlucHV0J11cIj48L25nLXRlbXBsYXRlPlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+XHJcbjwvZGl2PlxyXG4iXX0=