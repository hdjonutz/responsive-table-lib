import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { IStates } from "../table-responsive-interface";
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class TableHeaderComponent {
    constructor() {
        this.IStates = IStates;
        this.selectToAction = {};
        this.stateFilterText = {};
        this.selectionType = 'simple';
        this.select = new EventEmitter();
        this.onInputTextKey = new EventEmitter();
        this.onInputSortKey = new EventEmitter();
        this.addItem = new EventEmitter();
        this.refresh = new EventEmitter();
    }
    ngOnInit() {
        this.columns.forEach((k) => {
            this.selectToAction[k.key] = IStates.Nothing;
            this.stateFilterText[k.key] = '';
        });
    }
    ngAfterViewInit() {
        // column
        // key:  "....."
        // name: "...."
        // maxWidth:            100
        // minWidth:            30
        // remainingAutoFill:   false
        // width:               50
        console.log(this.headerRef);
        const width = this.headerRef?.nativeElement.clientWidth;
        this.columns;
        debugger;
    }
    changeTo(nameAction, key) {
        this.selectToAction[key] = nameAction;
        this.onInputSortKey.emit({ direction: nameAction, key: key });
    }
    updateFilterText(event, key) {
        const val = event.target.value;
        this.stateFilterText[key] = val;
        this.onInputTextKey.emit({ value: val, key: key });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TableHeaderComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: TableHeaderComponent, selector: "app-table-header", inputs: { columns: "columns", headerHeight: "headerHeight", allRowsSelected: "allRowsSelected", selectionType: "selectionType", droggableColumns: "droggableColumns" }, outputs: { select: "select", onInputTextKey: "onInputTextKey", onInputSortKey: "onInputSortKey", addItem: "addItem", refresh: "refresh" }, viewQueries: [{ propertyName: "headerRef", first: true, predicate: ["headerRefElement"], descendants: true }], ngImport: i0, template: "<div class=\"responsive_table_header\" style=\"{{headerHeight ? {'height': headerHeight+'px'} : ''}}\" #headerRefElement>\r\n\r\n  <div *ngFor=\"let att of columns; let i = index\"\r\n       class=\"column_responsive_table_header\"\r\n       style=\"width: {{(att['width'] || att['style']?.['width'])+'px'}};\r\n              max-width: {{(att['maxWidth'] || att['style']?.['maxWidth'])+'px'}};\r\n              min-width: {{(att['minWidth'] || att['style']?.['minWidth'])+'px'}}\">\r\n    <div class=\"header_title\">{{att['name']}} &nbsp;</div>\r\n\r\n\r\n    <div class=\"header_inputs_filter_sort\">\r\n      <ng-container *ngIf=\"att['key'] !=='' && !att['_headerTemplateInput']; then headFilter; else noKeyPropButtons\"></ng-container>\r\n      <ng-template #headFilter>\r\n        <div class=\"inputFilterText\">\r\n          <input value=\"{{stateFilterText[att['key']]}}\" (keyup)=\"updateFilterText($event, att['key'])\">\r\n        </div>\r\n        <div class=\"inputSortText\">\r\n\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.SmallerToBigger)\"\r\n               (click)=\"changeTo(IStates.Nothing, att['key'])\">\u25B2</div>\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.BiggerToSmaller)\"\r\n               (click)=\"changeTo(IStates.SmallerToBigger, att['key'])\">\u25BC</div>\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.Nothing)\"\r\n               (click)=\"changeTo(IStates.BiggerToSmaller, att['key'])\" style=\"font-size: 15px\">\u25A1</div>\r\n        </div>\r\n      </ng-template>\r\n      <ng-template #noKeyPropButtons [ngTemplateOutlet]=\"att['_headerTemplateInput']\"></ng-template>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: [".flex_column,.flex_column_min_width_height{display:flex;flex:1;flex-direction:column}.flex_row{display:flex;flex:1;flex-direction:row}.max_height_width{height:100%;width:100%;min-width:0;min-height:0}.flex_column_min_width_height{min-width:0;min-height:0}*{scrollbar-width:thin;scrollbar-color:#5287bd #DFE9EB}*::-webkit-scrollbar{height:10px;width:10px}*::-webkit-scrollbar-track{border-radius:3px;background-color:#d3d8da}*::-webkit-scrollbar-track:hover{background-color:#b8c0c2}*::-webkit-scrollbar-track:active{background-color:#b8c0c2}*::-webkit-scrollbar-thumb{border-radius:3px;background-color:#5287bd}*::-webkit-scrollbar-thumb:hover{background-color:#77a1cb}*::-webkit-scrollbar-thumb:active{background-color:#3d6e9f}:host{display:flex;flex-direction:row;padding-right:11px;background-color:#5287bd;border-bottom:1px solid #ffffff;overflow:hidden}.allCenter,.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle,.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText{justify-content:center;align-items:center;justify-items:center;text-align:center}.responsive_table_header{display:flex;color:#fff;width:100%}.responsive_table_header .column_responsive_table_header{display:flex;flex-direction:column;border-right:1px solid #ffffff;padding:2px;overflow:hidden;width:100%}.responsive_table_header .column_responsive_table_header:last-child{border-right:0}.responsive_table_header .column_responsive_table_header .header_title{display:flex;min-height:25px;font-size:12px;align-items:center;width:100%}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort{display:flex;flex-direction:row}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputFilterText{display:flex}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputFilterText input{width:100%;padding:4px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText{display:flex;flex-direction:column;padding:0 2px;font-size:10px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle{display:flex;color:#fff;height:10px;width:10px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle.hide{display:none}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle:hover{color:#fff;cursor:pointer}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .header_buttons mat-icon{background-color:#888;margin-right:2px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .header_buttons mat-icon:hover{cursor:pointer;background-color:#e9e9e9}\n"], dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TableHeaderComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-table-header', template: "<div class=\"responsive_table_header\" style=\"{{headerHeight ? {'height': headerHeight+'px'} : ''}}\" #headerRefElement>\r\n\r\n  <div *ngFor=\"let att of columns; let i = index\"\r\n       class=\"column_responsive_table_header\"\r\n       style=\"width: {{(att['width'] || att['style']?.['width'])+'px'}};\r\n              max-width: {{(att['maxWidth'] || att['style']?.['maxWidth'])+'px'}};\r\n              min-width: {{(att['minWidth'] || att['style']?.['minWidth'])+'px'}}\">\r\n    <div class=\"header_title\">{{att['name']}} &nbsp;</div>\r\n\r\n\r\n    <div class=\"header_inputs_filter_sort\">\r\n      <ng-container *ngIf=\"att['key'] !=='' && !att['_headerTemplateInput']; then headFilter; else noKeyPropButtons\"></ng-container>\r\n      <ng-template #headFilter>\r\n        <div class=\"inputFilterText\">\r\n          <input value=\"{{stateFilterText[att['key']]}}\" (keyup)=\"updateFilterText($event, att['key'])\">\r\n        </div>\r\n        <div class=\"inputSortText\">\r\n\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.SmallerToBigger)\"\r\n               (click)=\"changeTo(IStates.Nothing, att['key'])\">\u25B2</div>\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.BiggerToSmaller)\"\r\n               (click)=\"changeTo(IStates.SmallerToBigger, att['key'])\">\u25BC</div>\r\n          <div class=\"sortTriangle\"\r\n               [class.hide]=\"!(selectToAction[att['key']] === IStates.Nothing)\"\r\n               (click)=\"changeTo(IStates.BiggerToSmaller, att['key'])\" style=\"font-size: 15px\">\u25A1</div>\r\n        </div>\r\n      </ng-template>\r\n      <ng-template #noKeyPropButtons [ngTemplateOutlet]=\"att['_headerTemplateInput']\"></ng-template>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: [".flex_column,.flex_column_min_width_height{display:flex;flex:1;flex-direction:column}.flex_row{display:flex;flex:1;flex-direction:row}.max_height_width{height:100%;width:100%;min-width:0;min-height:0}.flex_column_min_width_height{min-width:0;min-height:0}*{scrollbar-width:thin;scrollbar-color:#5287bd #DFE9EB}*::-webkit-scrollbar{height:10px;width:10px}*::-webkit-scrollbar-track{border-radius:3px;background-color:#d3d8da}*::-webkit-scrollbar-track:hover{background-color:#b8c0c2}*::-webkit-scrollbar-track:active{background-color:#b8c0c2}*::-webkit-scrollbar-thumb{border-radius:3px;background-color:#5287bd}*::-webkit-scrollbar-thumb:hover{background-color:#77a1cb}*::-webkit-scrollbar-thumb:active{background-color:#3d6e9f}:host{display:flex;flex-direction:row;padding-right:11px;background-color:#5287bd;border-bottom:1px solid #ffffff;overflow:hidden}.allCenter,.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle,.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText{justify-content:center;align-items:center;justify-items:center;text-align:center}.responsive_table_header{display:flex;color:#fff;width:100%}.responsive_table_header .column_responsive_table_header{display:flex;flex-direction:column;border-right:1px solid #ffffff;padding:2px;overflow:hidden;width:100%}.responsive_table_header .column_responsive_table_header:last-child{border-right:0}.responsive_table_header .column_responsive_table_header .header_title{display:flex;min-height:25px;font-size:12px;align-items:center;width:100%}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort{display:flex;flex-direction:row}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputFilterText{display:flex}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputFilterText input{width:100%;padding:4px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText{display:flex;flex-direction:column;padding:0 2px;font-size:10px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle{display:flex;color:#fff;height:10px;width:10px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle.hide{display:none}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .inputSortText .sortTriangle:hover{color:#fff;cursor:pointer}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .header_buttons mat-icon{background-color:#888;margin-right:2px}.responsive_table_header .column_responsive_table_header .header_inputs_filter_sort .header_buttons mat-icon:hover{cursor:pointer;background-color:#e9e9e9}\n"] }]
        }], ctorParameters: function () { return []; }, propDecorators: { columns: [{
                type: Input
            }], headerHeight: [{
                type: Input
            }], allRowsSelected: [{
                type: Input
            }], selectionType: [{
                type: Input
            }], droggableColumns: [{
                type: Input
            }], select: [{
                type: Output
            }], onInputTextKey: [{
                type: Output
            }], onInputSortKey: [{
                type: Output
            }], addItem: [{
                type: Output
            }], refresh: [{
                type: Output
            }], headerRef: [{
                type: ViewChild,
                args: ['headerRefElement']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3RhYmxlLXJlc3BvbnNpdmUvc3JjL2xpYi9jb21wb25lbnRzL3RhYmxlLWhlYWRlci90YWJsZS1oZWFkZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdGFibGUtcmVzcG9uc2l2ZS9zcmMvbGliL2NvbXBvbmVudHMvdGFibGUtaGVhZGVyL3RhYmxlLWhlYWRlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBRUwsU0FBUyxFQUVULFlBQVksRUFDWixLQUFLLEVBRUwsTUFBTSxFQUNOLFNBQVMsRUFFVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sK0JBQStCLENBQUM7OztBQVF0RCxNQUFNLE9BQU8sb0JBQW9CO0lBc0IvQjtRQXJCbUIsWUFBTyxHQUFHLE9BQU8sQ0FBQztRQUVyQyxtQkFBYyxHQUE2QixFQUFFLENBQUM7UUFDOUMsb0JBQWUsR0FBNEIsRUFBRSxDQUFDO1FBS3JDLGtCQUFhLEdBQXFCLFFBQVEsQ0FBQztRQUkxQyxXQUFNLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDL0MsbUJBQWMsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ3BDLG1CQUFjLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUVwQyxZQUFPLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUM3QixZQUFPLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztJQUl4QixDQUFDO0lBRWhCLFFBQVE7UUFDTixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQStCLEVBQUUsRUFBRTtZQUN2RCxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO1lBQzdDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxlQUFlO1FBQ2IsU0FBUztRQUNULGdCQUFnQjtRQUNoQixlQUFlO1FBQ2YsMkJBQTJCO1FBQzNCLDBCQUEwQjtRQUMxQiw2QkFBNkI7UUFDN0IsMEJBQTBCO1FBRTFCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzVCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsYUFBYSxDQUFDLFdBQVcsQ0FBQztRQUN4RCxJQUFJLENBQUMsT0FBTyxDQUFBO1FBQ1osUUFBUSxDQUFDO0lBQ1gsQ0FBQztJQUVELFFBQVEsQ0FBQyxVQUFtQixFQUFFLEdBQVc7UUFDdkMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsR0FBRyxVQUFVLENBQUM7UUFDdEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUMsQ0FBQyxDQUFDO0lBQzlELENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxLQUFvQixFQUFFLEdBQVc7UUFDaEQsTUFBTSxHQUFHLEdBQUksS0FBSyxDQUFDLE1BQWMsQ0FBQyxLQUFLLENBQUM7UUFDeEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7UUFDaEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUMsQ0FBQyxDQUFDO0lBQ25ELENBQUM7K0dBdkRVLG9CQUFvQjttR0FBcEIsb0JBQW9CLDBkQ25CakMsdTBEQWlDQTs7NEZEZGEsb0JBQW9CO2tCQUxoQyxTQUFTOytCQUNFLGtCQUFrQjswRUFVbkIsT0FBTztzQkFBZixLQUFLO2dCQUNHLFlBQVk7c0JBQXBCLEtBQUs7Z0JBQ0csZUFBZTtzQkFBdkIsS0FBSztnQkFDRyxhQUFhO3NCQUFyQixLQUFLO2dCQUNHLGdCQUFnQjtzQkFBeEIsS0FBSztnQkFHSSxNQUFNO3NCQUFmLE1BQU07Z0JBQ0csY0FBYztzQkFBdkIsTUFBTTtnQkFDRyxjQUFjO3NCQUF2QixNQUFNO2dCQUVHLE9BQU87c0JBQWhCLE1BQU07Z0JBQ0csT0FBTztzQkFBaEIsTUFBTTtnQkFHd0IsU0FBUztzQkFBdkMsU0FBUzt1QkFBQyxrQkFBa0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgQ29tcG9uZW50LFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIElucHV0LFxyXG4gIE9uSW5pdCxcclxuICBPdXRwdXQsXHJcbiAgVmlld0NoaWxkLFxyXG4gIFZpZXdDb250YWluZXJSZWZcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtJU3RhdGVzfSBmcm9tIFwiLi4vdGFibGUtcmVzcG9uc2l2ZS1pbnRlcmZhY2VcIjtcclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ2FwcC10YWJsZS1oZWFkZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi90YWJsZS1oZWFkZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3RhYmxlLWhlYWRlci5jb21wb25lbnQuc2NzcyddLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgVGFibGVIZWFkZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG4gIHByb3RlY3RlZCByZWFkb25seSBJU3RhdGVzID0gSVN0YXRlcztcclxuXHJcbiAgc2VsZWN0VG9BY3Rpb246IHtba2V5OiBzdHJpbmddOiBJU3RhdGVzfSA9IHt9O1xyXG4gIHN0YXRlRmlsdGVyVGV4dDoge1trZXk6IHN0cmluZ106IHN0cmluZ30gPSB7fTtcclxuXHJcbiAgQElucHV0KCkgY29sdW1ucyE6IEFycmF5PGFueT47XHJcbiAgQElucHV0KCkgaGVhZGVySGVpZ2h0ITogbnVtYmVyO1xyXG4gIEBJbnB1dCgpIGFsbFJvd3NTZWxlY3RlZCE6IEFycmF5PGFueT47XHJcbiAgQElucHV0KCkgc2VsZWN0aW9uVHlwZTogJ3NpbXBsZSd8J211bHRpJyA9ICdzaW1wbGUnO1xyXG4gIEBJbnB1dCgpIGRyb2dnYWJsZUNvbHVtbnMhOiBib29sZWFuO1xyXG5cclxuXHJcbiAgQE91dHB1dCgpIHNlbGVjdDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgQE91dHB1dCgpIG9uSW5wdXRUZXh0S2V5ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSBvbklucHV0U29ydEtleSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgQE91dHB1dCgpIGFkZEl0ZW0gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgQE91dHB1dCgpIHJlZnJlc2ggPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIC8vIEBWaWV3Q2hpbGQgKCdoZWFkZXJSZWZFbGVtZW50JywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmLCBzdGF0aWM6IGZhbHNlIH0pIGhlYWRlclJlZjogVmlld0NvbnRhaW5lclJlZiB8IHVuZGVmaW5lZDtcclxuICBAVmlld0NoaWxkKCdoZWFkZXJSZWZFbGVtZW50JykgaGVhZGVyUmVmPzogRWxlbWVudFJlZjtcclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5jb2x1bW5zLmZvckVhY2goKGs6IHtrZXk6IHN0cmluZzsgdGl0bGU6IHN0cmluZ30pID0+IHtcclxuICAgICAgdGhpcy5zZWxlY3RUb0FjdGlvbltrLmtleV0gPSBJU3RhdGVzLk5vdGhpbmc7XHJcbiAgICAgIHRoaXMuc3RhdGVGaWx0ZXJUZXh0W2sua2V5XSA9ICcnO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAvLyBjb2x1bW5cclxuICAgIC8vIGtleTogIFwiLi4uLi5cIlxyXG4gICAgLy8gbmFtZTogXCIuLi4uXCJcclxuICAgIC8vIG1heFdpZHRoOiAgICAgICAgICAgIDEwMFxyXG4gICAgLy8gbWluV2lkdGg6ICAgICAgICAgICAgMzBcclxuICAgIC8vIHJlbWFpbmluZ0F1dG9GaWxsOiAgIGZhbHNlXHJcbiAgICAvLyB3aWR0aDogICAgICAgICAgICAgICA1MFxyXG5cclxuICAgIGNvbnNvbGUubG9nKHRoaXMuaGVhZGVyUmVmKTtcclxuICAgIGNvbnN0IHdpZHRoID0gdGhpcy5oZWFkZXJSZWY/Lm5hdGl2ZUVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICB0aGlzLmNvbHVtbnNcclxuICAgIGRlYnVnZ2VyO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlVG8obmFtZUFjdGlvbjogSVN0YXRlcywga2V5OiBzdHJpbmcpIHtcclxuICAgIHRoaXMuc2VsZWN0VG9BY3Rpb25ba2V5XSA9IG5hbWVBY3Rpb247XHJcbiAgICB0aGlzLm9uSW5wdXRTb3J0S2V5LmVtaXQoe2RpcmVjdGlvbjogbmFtZUFjdGlvbiwga2V5OiBrZXl9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUZpbHRlclRleHQoZXZlbnQ6IEtleWJvYXJkRXZlbnQsIGtleTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB2YWwgPSAoZXZlbnQudGFyZ2V0IGFzIGFueSkudmFsdWU7XHJcbiAgICB0aGlzLnN0YXRlRmlsdGVyVGV4dFtrZXldID0gdmFsO1xyXG4gICAgdGhpcy5vbklucHV0VGV4dEtleS5lbWl0KHt2YWx1ZTogdmFsLCBrZXk6IGtleX0pO1xyXG4gIH1cclxufVxyXG4iLCI8ZGl2IGNsYXNzPVwicmVzcG9uc2l2ZV90YWJsZV9oZWFkZXJcIiBzdHlsZT1cInt7aGVhZGVySGVpZ2h0ID8geydoZWlnaHQnOiBoZWFkZXJIZWlnaHQrJ3B4J30gOiAnJ319XCIgI2hlYWRlclJlZkVsZW1lbnQ+XHJcblxyXG4gIDxkaXYgKm5nRm9yPVwibGV0IGF0dCBvZiBjb2x1bW5zOyBsZXQgaSA9IGluZGV4XCJcclxuICAgICAgIGNsYXNzPVwiY29sdW1uX3Jlc3BvbnNpdmVfdGFibGVfaGVhZGVyXCJcclxuICAgICAgIHN0eWxlPVwid2lkdGg6IHt7KGF0dFsnd2lkdGgnXSB8fCBhdHRbJ3N0eWxlJ10/Llsnd2lkdGgnXSkrJ3B4J319O1xyXG4gICAgICAgICAgICAgIG1heC13aWR0aDoge3soYXR0WydtYXhXaWR0aCddIHx8IGF0dFsnc3R5bGUnXT8uWydtYXhXaWR0aCddKSsncHgnfX07XHJcbiAgICAgICAgICAgICAgbWluLXdpZHRoOiB7eyhhdHRbJ21pbldpZHRoJ10gfHwgYXR0WydzdHlsZSddPy5bJ21pbldpZHRoJ10pKydweCd9fVwiPlxyXG4gICAgPGRpdiBjbGFzcz1cImhlYWRlcl90aXRsZVwiPnt7YXR0WyduYW1lJ119fSAmbmJzcDs8L2Rpdj5cclxuXHJcblxyXG4gICAgPGRpdiBjbGFzcz1cImhlYWRlcl9pbnB1dHNfZmlsdGVyX3NvcnRcIj5cclxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImF0dFsna2V5J10gIT09JycgJiYgIWF0dFsnX2hlYWRlclRlbXBsYXRlSW5wdXQnXTsgdGhlbiBoZWFkRmlsdGVyOyBlbHNlIG5vS2V5UHJvcEJ1dHRvbnNcIj48L25nLWNvbnRhaW5lcj5cclxuICAgICAgPG5nLXRlbXBsYXRlICNoZWFkRmlsdGVyPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dEZpbHRlclRleHRcIj5cclxuICAgICAgICAgIDxpbnB1dCB2YWx1ZT1cInt7c3RhdGVGaWx0ZXJUZXh0W2F0dFsna2V5J11dfX1cIiAoa2V5dXApPVwidXBkYXRlRmlsdGVyVGV4dCgkZXZlbnQsIGF0dFsna2V5J10pXCI+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0U29ydFRleHRcIj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic29ydFRyaWFuZ2xlXCJcclxuICAgICAgICAgICAgICAgW2NsYXNzLmhpZGVdPVwiIShzZWxlY3RUb0FjdGlvblthdHRbJ2tleSddXSA9PT0gSVN0YXRlcy5TbWFsbGVyVG9CaWdnZXIpXCJcclxuICAgICAgICAgICAgICAgKGNsaWNrKT1cImNoYW5nZVRvKElTdGF0ZXMuTm90aGluZywgYXR0WydrZXknXSlcIj7ilrI8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzb3J0VHJpYW5nbGVcIlxyXG4gICAgICAgICAgICAgICBbY2xhc3MuaGlkZV09XCIhKHNlbGVjdFRvQWN0aW9uW2F0dFsna2V5J11dID09PSBJU3RhdGVzLkJpZ2dlclRvU21hbGxlcilcIlxyXG4gICAgICAgICAgICAgICAoY2xpY2spPVwiY2hhbmdlVG8oSVN0YXRlcy5TbWFsbGVyVG9CaWdnZXIsIGF0dFsna2V5J10pXCI+4pa8PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic29ydFRyaWFuZ2xlXCJcclxuICAgICAgICAgICAgICAgW2NsYXNzLmhpZGVdPVwiIShzZWxlY3RUb0FjdGlvblthdHRbJ2tleSddXSA9PT0gSVN0YXRlcy5Ob3RoaW5nKVwiXHJcbiAgICAgICAgICAgICAgIChjbGljayk9XCJjaGFuZ2VUbyhJU3RhdGVzLkJpZ2dlclRvU21hbGxlciwgYXR0WydrZXknXSlcIiBzdHlsZT1cImZvbnQtc2l6ZTogMTVweFwiPuKWoTwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L25nLXRlbXBsYXRlPlxyXG4gICAgICA8bmctdGVtcGxhdGUgI25vS2V5UHJvcEJ1dHRvbnMgW25nVGVtcGxhdGVPdXRsZXRdPVwiYXR0WydfaGVhZGVyVGVtcGxhdGVJbnB1dCddXCI+PC9uZy10ZW1wbGF0ZT5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG48L2Rpdj5cclxuIl19