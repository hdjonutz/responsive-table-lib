import { Component, ContentChildren, EventEmitter, Input, Output } from '@angular/core';
import { IStates, SelectionType } from "./table-responsive-interface";
import { DataTableColumnDirective } from "../directive/column/column.directive";
import * as i0 from "@angular/core";
import * as i1 from "./table-header/table-header.component";
import * as i2 from "./table-body/table-body.component";
import * as i3 from "./table-footer/table-footer.component";
export class TableResponsiveComponent {
    constructor() {
        this.selectionType = SelectionType.simple;
        this._internalColumns = [];
        this.HEIGHT_ROW = 50;
        this.filterHeader = [];
        this.sortHeader = [];
        this.pageSize = Infinity;
        this.selected = [];
        this.refreshProp = new EventEmitter();
        this.addItemProp = new EventEmitter();
        this.onChangePositionRows = new EventEmitter();
    }
    ngOnChanges(changes) {
        if (changes['rows'].currentValue) {
            this.tabledata = [...changes['rows'].currentValue];
            this.tabledataFiltered = [...changes['rows'].currentValue];
            console.log('Table receive data.length:' + this.tabledataFiltered.length);
        }
        this.selected = changes['selected']?.currentValue;
    }
    ngOnInit() {
        this.HEIGHT_HEADER = this.config?.headerHeight ? this.config.headerHeight : this.HEIGHT_HEADER;
        this.HEIGHT_FOOTER = this.config?.footerHeight ? this.config.footerHeight : this.HEIGHT_FOOTER;
        this.HEIGHT_FOOTER = this.config?.rowHeight ? this.config.rowHeight : this.HEIGHT_ROW;
    }
    /**
     * Column templates gathered from `ContentChildren`
     * if described in your markup.
     */
    set columnTemplates(val) {
        this._columnTemplates = val;
        this._internalColumns = val.toArray();
    }
    /**
     * Returns the column templates.
     */
    get columnTemplates() {
        return this._columnTemplates;
    }
    updateFilterInput(keyFilter) {
        this.tabledata = this.rows;
        const foundIndex = this.filterHeader.findIndex((f) => f.key === keyFilter.key);
        if (foundIndex >= 0) {
            // updateFilter from header
            this.filterHeader[foundIndex].value = keyFilter.value;
        }
        else {
            this.filterHeader.push({ key: keyFilter.key, value: keyFilter.value });
        }
        this.tabledata = this.rows;
        this.filterHeader.forEach((keyValFilter) => {
            this.tabledata = this.tabledata.filter((o) => (o[keyValFilter.key] + '').toLowerCase().indexOf((keyValFilter.value + '').toLowerCase()) >= 0);
        });
        this.tabledataFiltered = this.tabledata;
    }
    sortColumnFilterInput(sort) {
        // performance -> do not call again updateFilterInput reason on original daten;
        this.tabledata = [...this.tabledataFiltered];
        const foundIndex = this.sortHeader.findIndex((f) => f.key === sort.key);
        if (foundIndex >= 0) {
            // updateFilter from header
            this.sortHeader[foundIndex].direction = sort.direction;
        }
        else {
            this.sortHeader.push({ key: sort.key, direction: sort.direction });
        }
        this.sortHeader = this.sortHeader.filter((f) => f.direction !== IStates.Nothing);
        const sortByAllKeys = (a, b) => {
            const arr = [];
            this.sortHeader.forEach((r) => {
                let res = (a[r.key] + '')['localeCompare'](b[r.key] + '', 'de', { numeric: true, sensitivity: 'base' });
                res = res === 0
                    ? res
                    : (r.direction === IStates.BiggerToSmaller ? res * -1 : res);
                arr.push(res);
            });
            return arr[0]; // arr.some((s) => s === -1) ? -1 : 1;
        };
        if (this.sortHeader.length > 0) {
            this.tabledata.sort((a, b) => {
                return sortByAllKeys(a, b); // (a[sort.key] + '')['localeCompare'](b[sort.key] + '', 'de', { numeric: true });
            });
            // if (sort.direction === IStates.BiggerToSmaller) {
            //   this.tabledata.reverse();
            // }
        }
    }
    positionRowsChanged(data) {
        this.tabledata = [...data];
        this.tabledataFiltered = [...data];
        this.onChangePositionRows.emit(data);
        debugger;
    }
    onHeaderSelect(event) {
    }
    onBodyPage(event) {
    }
    onBodySelect(event) {
    }
    onBodyScroll(event) {
    }
    onFooterPage(event) {
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TableResponsiveComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: TableResponsiveComponent, selector: "lib-table-responsive", inputs: { rows: "rows", config: "config", selected: "selected", droggableColumns: "droggableColumns", droggableRows: "droggableRows" }, outputs: { refreshProp: "refreshProp", addItemProp: "addItemProp", onChangePositionRows: "onChangePositionRows" }, queries: [{ propertyName: "columnTemplates", predicate: DataTableColumnDirective }], usesOnChanges: true, ngImport: i0, template: "<div class=\"responsive_table\">\n\n  <app-table-header\n    [columns]=\"_internalColumns\"\n    [headerHeight]=\"HEIGHT_HEADER\"\n    [allRowsSelected]=\"selected\"\n    [selectionType]=\"selectionType\"\n    [droggableColumns]=\"droggableColumns\"\n    (select)=\"onHeaderSelect($event)\"\n    (onInputTextKey)=\"updateFilterInput($event)\"\n    (onInputSortKey)=\"sortColumnFilterInput($event)\"\n  ></app-table-header>\n  <app-table-body\n    [config]=\"config\"\n    [rows]=\"tabledata\"\n    [scrollbarV]=\"config.scrollV\"\n    [scrollbarH]=\"config.scrollH\"\n    [loadingIndicator]=\"config.showLoading\"\n    [rowHeight]=\"config.rowHeight\"\n    [rowCount]=\"tabledataFiltered?.length + ''\"\n    [columns]=\"_internalColumns\"\n    [pageSize]=\"pageSize\"\n    [rowDetail]=\"rowDetail\"\n    [rowClass]=\"rowClass\"\n    [selected]=\"selected\"\n    [droggableRows]=\"droggableRows\"\n    (onChangePositionRows)=\"positionRowsChanged($event)\"\n    (page)=\"onBodyPage($event)\"\n    (select)=\"onBodySelect($event)\"\n    (scroll)=\"onBodyScroll($event)\"\n  ></app-table-body>\n  <app-table-footer\n    [rowCount]=\"tabledataFiltered?.length + ''\"\n    [pageSize]=\"pageSize\"\n    [footerHeight]=\"HEIGHT_FOOTER\"\n    [totalMessage]=\"config.messageTableNoData\"\n    (page)=\"onFooterPage($event)\"\n  ></app-table-footer>\n\n<!--  <div *ngIf=\"config.displayTableName\"> &#45;&#45;NAme&#45;&#45; </div>-->\n\n<!--  <mat-divider></mat-divider>-->\n<!--  <div class=\"responsive_table_header\" style=\"height: {{HEIGHT_HEADER}}\">-->\n<!--    <mat-divider vertical=\"true\"></mat-divider>-->\n<!--    <app-reactive-table-inputs-filter [attr]=\"struct\"-->\n<!--                                      (onInputTextKey)=\"updateFilterInput($event)\"-->\n<!--                                      (onInputSortKey)=\"sortColumnFilterInput($event)\"-->\n<!--                                      (addItem)=\"addItemProp.emit()\"-->\n<!--                                      (refresh)=\"refreshProp.emit()\"-->\n<!--    >-->\n<!--    </app-reactive-table-inputs-filter>-->\n<!--    <mat-divider vertical=\"true\"></mat-divider>-->\n<!--  </div>-->\n\n<!--  <div class=\"responsive_table_header_loading\" *ngIf=\"config?.showLoading && !rows\">-->\n<!--    <mat-divider></mat-divider>-->\n<!--    <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>-->\n<!--  </div>-->\n\n<!--  <mat-divider></mat-divider>-->\n\n<!--  <div class=\"responsive_table_body\">-->\n<!--    <mat-divider vertical=\"true\"></mat-divider>-->\n<!--    <app-reactive-table-row-cell [data]=\"tabledata\"-->\n<!--                                 [attr]=\"struct\"-->\n<!--                                 (onClickRow)=\"config.onSelectRow($event)\"-->\n<!--                                 [config]=\"config\"-->\n<!--    >-->\n<!--    </app-reactive-table-row-cell>-->\n<!--    <mat-divider vertical=\"true\"></mat-divider>-->\n<!--  </div>-->\n\n<!--  <mat-divider></mat-divider>-->\n<!--  <div *ngIf=\"!config?.displayFooter === false\" class=\"responsive_table_footer\" style=\"height: {{HEIGHT_FOOTER}}\">-->\n<!--    <mat-divider vertical=\"true\"></mat-divider>-->\n<!--    <app-app-reactive-table-footer></app-app-reactive-table-footer>-->\n<!--    <mat-divider vertical=\"true\" style=\"height: 100%\"></mat-divider>-->\n<!--  </div>-->\n<!--  <mat-divider></mat-divider>-->\n</div>\n", styles: [".flex_column,.flex_column_min_width_height,.responsive_table,:host{display:flex;flex:1;flex-direction:column}.flex_row{display:flex;flex:1;flex-direction:row}.max_height_width{height:100%;width:100%;min-width:0;min-height:0}.flex_column_min_width_height,.responsive_table,:host{min-width:0;min-height:0}*{scrollbar-width:thin;scrollbar-color:#5287bd #DFE9EB}*::-webkit-scrollbar{height:10px;width:10px}*::-webkit-scrollbar-track{border-radius:3px;background-color:#d3d8da}*::-webkit-scrollbar-track:hover{background-color:#b8c0c2}*::-webkit-scrollbar-track:active{background-color:#b8c0c2}*::-webkit-scrollbar-thumb{border-radius:3px;background-color:#5287bd}*::-webkit-scrollbar-thumb:hover{background-color:#77a1cb}*::-webkit-scrollbar-thumb:active{background-color:#3d6e9f}.responsive_table{border:1px solid #5287bd}.responsive_table .responsive_table_header{display:flex;background-color:#5287bd;color:#fff}.responsive_table .responsive_table_body{min-width:0;min-height:0;display:flex;flex:1}.responsive_table .responsive_table_footer{display:flex}\n"], dependencies: [{ kind: "component", type: i1.TableHeaderComponent, selector: "app-table-header", inputs: ["columns", "headerHeight", "allRowsSelected", "selectionType", "droggableColumns"], outputs: ["select", "onInputTextKey", "onInputSortKey", "addItem", "refresh"] }, { kind: "component", type: i2.TableBodyComponent, selector: "app-table-body", inputs: ["config", "columns", "rows", "scrollbarV", "scrollbarH", "loadingIndicator", "rowHeight", "rowCount", "pageSize", "rowDetail", "rowClass", "selected", "droggableRows"], outputs: ["page", "select", "onChangePositionRows", "scroll"] }, { kind: "component", type: i3.TableFooterComponent, selector: "app-table-footer", inputs: ["rowCount", "pageSize", "footerHeight", "totalMessage"], outputs: ["page"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TableResponsiveComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-table-responsive', template: "<div class=\"responsive_table\">\n\n  <app-table-header\n    [columns]=\"_internalColumns\"\n    [headerHeight]=\"HEIGHT_HEADER\"\n    [allRowsSelected]=\"selected\"\n    [selectionType]=\"selectionType\"\n    [droggableColumns]=\"droggableColumns\"\n    (select)=\"onHeaderSelect($event)\"\n    (onInputTextKey)=\"updateFilterInput($event)\"\n    (onInputSortKey)=\"sortColumnFilterInput($event)\"\n  ></app-table-header>\n  <app-table-body\n    [config]=\"config\"\n    [rows]=\"tabledata\"\n    [scrollbarV]=\"config.scrollV\"\n    [scrollbarH]=\"config.scrollH\"\n    [loadingIndicator]=\"config.showLoading\"\n    [rowHeight]=\"config.rowHeight\"\n    [rowCount]=\"tabledataFiltered?.length + ''\"\n    [columns]=\"_internalColumns\"\n    [pageSize]=\"pageSize\"\n    [rowDetail]=\"rowDetail\"\n    [rowClass]=\"rowClass\"\n    [selected]=\"selected\"\n    [droggableRows]=\"droggableRows\"\n    (onChangePositionRows)=\"positionRowsChanged($event)\"\n    (page)=\"onBodyPage($event)\"\n    (select)=\"onBodySelect($event)\"\n    (scroll)=\"onBodyScroll($event)\"\n  ></app-table-body>\n  <app-table-footer\n    [rowCount]=\"tabledataFiltered?.length + ''\"\n    [pageSize]=\"pageSize\"\n    [footerHeight]=\"HEIGHT_FOOTER\"\n    [totalMessage]=\"config.messageTableNoData\"\n    (page)=\"onFooterPage($event)\"\n  ></app-table-footer>\n\n<!--  <div *ngIf=\"config.displayTableName\"> &#45;&#45;NAme&#45;&#45; </div>-->\n\n<!--  <mat-divider></mat-divider>-->\n<!--  <div class=\"responsive_table_header\" style=\"height: {{HEIGHT_HEADER}}\">-->\n<!--    <mat-divider vertical=\"true\"></mat-divider>-->\n<!--    <app-reactive-table-inputs-filter [attr]=\"struct\"-->\n<!--                                      (onInputTextKey)=\"updateFilterInput($event)\"-->\n<!--                                      (onInputSortKey)=\"sortColumnFilterInput($event)\"-->\n<!--                                      (addItem)=\"addItemProp.emit()\"-->\n<!--                                      (refresh)=\"refreshProp.emit()\"-->\n<!--    >-->\n<!--    </app-reactive-table-inputs-filter>-->\n<!--    <mat-divider vertical=\"true\"></mat-divider>-->\n<!--  </div>-->\n\n<!--  <div class=\"responsive_table_header_loading\" *ngIf=\"config?.showLoading && !rows\">-->\n<!--    <mat-divider></mat-divider>-->\n<!--    <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>-->\n<!--  </div>-->\n\n<!--  <mat-divider></mat-divider>-->\n\n<!--  <div class=\"responsive_table_body\">-->\n<!--    <mat-divider vertical=\"true\"></mat-divider>-->\n<!--    <app-reactive-table-row-cell [data]=\"tabledata\"-->\n<!--                                 [attr]=\"struct\"-->\n<!--                                 (onClickRow)=\"config.onSelectRow($event)\"-->\n<!--                                 [config]=\"config\"-->\n<!--    >-->\n<!--    </app-reactive-table-row-cell>-->\n<!--    <mat-divider vertical=\"true\"></mat-divider>-->\n<!--  </div>-->\n\n<!--  <mat-divider></mat-divider>-->\n<!--  <div *ngIf=\"!config?.displayFooter === false\" class=\"responsive_table_footer\" style=\"height: {{HEIGHT_FOOTER}}\">-->\n<!--    <mat-divider vertical=\"true\"></mat-divider>-->\n<!--    <app-app-reactive-table-footer></app-app-reactive-table-footer>-->\n<!--    <mat-divider vertical=\"true\" style=\"height: 100%\"></mat-divider>-->\n<!--  </div>-->\n<!--  <mat-divider></mat-divider>-->\n</div>\n", styles: [".flex_column,.flex_column_min_width_height,.responsive_table,:host{display:flex;flex:1;flex-direction:column}.flex_row{display:flex;flex:1;flex-direction:row}.max_height_width{height:100%;width:100%;min-width:0;min-height:0}.flex_column_min_width_height,.responsive_table,:host{min-width:0;min-height:0}*{scrollbar-width:thin;scrollbar-color:#5287bd #DFE9EB}*::-webkit-scrollbar{height:10px;width:10px}*::-webkit-scrollbar-track{border-radius:3px;background-color:#d3d8da}*::-webkit-scrollbar-track:hover{background-color:#b8c0c2}*::-webkit-scrollbar-track:active{background-color:#b8c0c2}*::-webkit-scrollbar-thumb{border-radius:3px;background-color:#5287bd}*::-webkit-scrollbar-thumb:hover{background-color:#77a1cb}*::-webkit-scrollbar-thumb:active{background-color:#3d6e9f}.responsive_table{border:1px solid #5287bd}.responsive_table .responsive_table_header{display:flex;background-color:#5287bd;color:#fff}.responsive_table .responsive_table_body{min-width:0;min-height:0;display:flex;flex:1}.responsive_table .responsive_table_footer{display:flex}\n"] }]
        }], ctorParameters: function () { return []; }, propDecorators: { rows: [{
                type: Input
            }], config: [{
                type: Input
            }], selected: [{
                type: Input
            }], droggableColumns: [{
                type: Input
            }], droggableRows: [{
                type: Input
            }], refreshProp: [{
                type: Output
            }], addItemProp: [{
                type: Output
            }], onChangePositionRows: [{
                type: Output
            }], columnTemplates: [{
                type: ContentChildren,
                args: [DataTableColumnDirective]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtcmVzcG9uc2l2ZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy90YWJsZS1yZXNwb25zaXZlL3NyYy9saWIvY29tcG9uZW50cy90YWJsZS1yZXNwb25zaXZlLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3RhYmxlLXJlc3BvbnNpdmUvc3JjL2xpYi9jb21wb25lbnRzL3RhYmxlLXJlc3BvbnNpdmUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxlQUFlLEVBQ2YsWUFBWSxFQUNaLEtBQUssRUFHTCxNQUFNLEVBR1AsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUF5QixPQUFPLEVBQUUsYUFBYSxFQUFDLE1BQU0sOEJBQThCLENBQUM7QUFDNUYsT0FBTyxFQUFDLHdCQUF3QixFQUFDLE1BQU0sc0NBQXNDLENBQUM7Ozs7O0FBTzlFLE1BQU0sT0FBTyx3QkFBd0I7SUE2Qm5DO1FBNUJVLGtCQUFhLEdBQWtCLGFBQWEsQ0FBQyxNQUFNLENBQUM7UUFFOUQscUJBQWdCLEdBQWUsRUFBRSxDQUFDO1FBSWxDLGVBQVUsR0FBUSxFQUFFLENBQUM7UUFJckIsaUJBQVksR0FBOEMsRUFBRSxDQUFDO1FBQzdELGVBQVUsR0FBZ0QsRUFBRSxDQUFDO1FBQzdELGFBQVEsR0FBa0QsUUFBUSxDQUFDO1FBTTFELGFBQVEsR0FBZ0IsRUFBRSxDQUFDO1FBSzFCLGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUNqQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDakMseUJBQW9CLEdBQTZDLElBQUksWUFBWSxFQUE2QixDQUFDO0lBRzFHLENBQUM7SUFFaEIsV0FBVyxDQUFDLE9BQXNCO1FBQ2hDLElBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFlBQVksRUFBRTtZQUNo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QXhJVSx3QkFBd0I7bUdBQXhCLHdCQUF3Qix1VkFrRGxCLHdCQUF3QixrRENyRTNDLHd6R0FnRkE7OzRGRDdEYSx3QkFBd0I7a0JBTHBDLFNBQVM7K0JBQ0Usc0JBQXNCOzBFQXFCdkIsSUFBSTtzQkFBWixLQUFLO2dCQUNHLE1BQU07c0JBQWQsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUVHLGdCQUFnQjtzQkFBeEIsS0FBSztnQkFDRyxhQUFhO3NCQUFyQixLQUFLO2dCQUVJLFdBQVc7c0JBQXBCLE1BQU07Z0JBQ0csV0FBVztzQkFBcEIsTUFBTTtnQkFDRyxvQkFBb0I7c0JBQTdCLE1BQU07Z0JBeUJILGVBQWU7c0JBRGxCLGVBQWU7dUJBQUMsd0JBQXdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBDb250ZW50Q2hpbGRyZW4sXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsXG4gIE9uQ2hhbmdlcyxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFF1ZXJ5TGlzdCxcbiAgU2ltcGxlQ2hhbmdlc1xufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7SVJlc3BvbnNpdmVUYWJsZUNvbmZpZywgSVN0YXRlcywgU2VsZWN0aW9uVHlwZX0gZnJvbSBcIi4vdGFibGUtcmVzcG9uc2l2ZS1pbnRlcmZhY2VcIjtcbmltcG9ydCB7RGF0YVRhYmxlQ29sdW1uRGlyZWN0aXZlfSBmcm9tIFwiLi4vZGlyZWN0aXZlL2NvbHVtbi9jb2x1bW4uZGlyZWN0aXZlXCI7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xpYi10YWJsZS1yZXNwb25zaXZlJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3RhYmxlLXJlc3BvbnNpdmUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi90YWJsZS1yZXNwb25zaXZlLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgVGFibGVSZXNwb25zaXZlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xuICBwcm90ZWN0ZWQgc2VsZWN0aW9uVHlwZTogU2VsZWN0aW9uVHlwZSA9IFNlbGVjdGlvblR5cGUuc2ltcGxlO1xuXG4gIF9pbnRlcm5hbENvbHVtbnM6IEFycmF5PGFueT4gPSBbXTtcblxuICBIRUlHSFRfSEVBREVSITogbnVtYmVyO1xuICBIRUlHSFRfRk9PVEVSITogbnVtYmVyO1xuICBIRUlHSFRfUk9XICAgICAgPSA1MDtcblxuICB0YWJsZWRhdGEhOiBBcnJheTx7IFtrZXk6IHN0cmluZ106IGFueSB9PjtcbiAgdGFibGVkYXRhRmlsdGVyZWQhOiBBcnJheTx7IFtrZXk6IHN0cmluZ106IGFueSB9PjtcbiAgZmlsdGVySGVhZGVyOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+ICAgICA9IFtdO1xuICBzb3J0SGVhZGVyOiBBcnJheTx7IGtleTogc3RyaW5nOyBkaXJlY3Rpb246IElTdGF0ZXMgfT4gID0gW107XG4gIHBhZ2VTaXplOiBudW1iZXIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBJbmZpbml0eTtcbiAgcm93RGV0YWlsIToge2tleUluZGV4OiBzdHJpbmcsIHNob3c6IGJvb2xlYW4sIHJvdzogYW55fTtcbiAgcm93Q2xhc3MhOiB7a2V5SW5kZXg6IHN0cmluZywgY2xhc3NOYW1lOiBib29sZWFuLCByb3c6IGFueX07XG5cbiAgQElucHV0KCkgcm93cyE6ICAgICBBcnJheTx7W2tleTogc3RyaW5nXTogYW55fT47XG4gIEBJbnB1dCgpIGNvbmZpZyE6ICAgSVJlc3BvbnNpdmVUYWJsZUNvbmZpZztcbiAgQElucHV0KCkgc2VsZWN0ZWQ6ICBBcnJheTxhbnk+ID0gW107XG5cbiAgQElucHV0KCkgZHJvZ2dhYmxlQ29sdW1ucyE6IGJvb2xlYW47XG4gIEBJbnB1dCgpIGRyb2dnYWJsZVJvd3MhOiBib29sZWFuO1xuXG4gIEBPdXRwdXQoKSByZWZyZXNoUHJvcCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIGFkZEl0ZW1Qcm9wID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgb25DaGFuZ2VQb3NpdGlvblJvd3M6IEV2ZW50RW1pdHRlcjxBcnJheTx7W2tleTpzdHJpbmddOiBhbnl9Pj4gPSBuZXcgRXZlbnRFbWl0dGVyPEFycmF5PHtbcDogc3RyaW5nXTogYW55fT4+KCk7XG5cbiAgX2NvbHVtblRlbXBsYXRlcyE6IFF1ZXJ5TGlzdDxEYXRhVGFibGVDb2x1bW5EaXJlY3RpdmU+O1xuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGlmIChjaGFuZ2VzWydyb3dzJ10uY3VycmVudFZhbHVlKSB7XG4gICAgICB0aGlzLnRhYmxlZGF0YSA9ICAgICAgICAgIFsuLi5jaGFuZ2VzWydyb3dzJ10uY3VycmVudFZhbHVlXTtcbiAgICAgIHRoaXMudGFibGVkYXRhRmlsdGVyZWQgPSAgWy4uLmNoYW5nZXNbJ3Jvd3MnXS5jdXJyZW50VmFsdWVdO1xuICAgICAgY29uc29sZS5sb2coJ1RhYmxlIHJlY2VpdmUgZGF0YS5sZW5ndGg6JyAgK3RoaXMudGFibGVkYXRhRmlsdGVyZWQubGVuZ3RoKTtcbiAgICB9XG4gICAgdGhpcy5zZWxlY3RlZCA9IGNoYW5nZXNbJ3NlbGVjdGVkJ10/LmN1cnJlbnRWYWx1ZTtcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMuSEVJR0hUX0hFQURFUiA9IHRoaXMuY29uZmlnPy5oZWFkZXJIZWlnaHQgPyB0aGlzLmNvbmZpZy5oZWFkZXJIZWlnaHQgOiB0aGlzLkhFSUdIVF9IRUFERVI7XG4gICAgdGhpcy5IRUlHSFRfRk9PVEVSID0gdGhpcy5jb25maWc/LmZvb3RlckhlaWdodCA/IHRoaXMuY29uZmlnLmZvb3RlckhlaWdodCA6IHRoaXMuSEVJR0hUX0ZPT1RFUjtcbiAgICB0aGlzLkhFSUdIVF9GT09URVIgPSB0aGlzLmNvbmZpZz8ucm93SGVpZ2h0ID8gdGhpcy5jb25maWcucm93SGVpZ2h0IDogdGhpcy5IRUlHSFRfUk9XO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbHVtbiB0ZW1wbGF0ZXMgZ2F0aGVyZWQgZnJvbSBgQ29udGVudENoaWxkcmVuYFxuICAgKiBpZiBkZXNjcmliZWQgaW4geW91ciBtYXJrdXAuXG4gICAqL1xuICBAQ29udGVudENoaWxkcmVuKERhdGFUYWJsZUNvbHVtbkRpcmVjdGl2ZSlcbiAgc2V0IGNvbHVtblRlbXBsYXRlcyh2YWw6IFF1ZXJ5TGlzdDxEYXRhVGFibGVDb2x1bW5EaXJlY3RpdmU+KSB7XG4gICAgdGhpcy5fY29sdW1uVGVtcGxhdGVzID0gdmFsO1xuICAgIHRoaXMuX2ludGVybmFsQ29sdW1ucyA9IHZhbC50b0FycmF5KCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY29sdW1uIHRlbXBsYXRlcy5cbiAgICovXG4gIGdldCBjb2x1bW5UZW1wbGF0ZXMoKTogUXVlcnlMaXN0PERhdGFUYWJsZUNvbHVtbkRpcmVjdGl2ZT4ge1xuICAgIHJldHVybiB0aGlzLl9jb2x1bW5UZW1wbGF0ZXM7XG4gIH1cblxuICB1cGRhdGVGaWx0ZXJJbnB1dChrZXlGaWx0ZXI6IHt2YWx1ZTogc3RyaW5nLCBrZXk6IHN0cmluZ30pIHtcbiAgICB0aGlzLnRhYmxlZGF0YSA9IHRoaXMucm93cztcblxuICAgIGNvbnN0IGZvdW5kSW5kZXggPSB0aGlzLmZpbHRlckhlYWRlci5maW5kSW5kZXgoKGYpID0+IGYua2V5ID09PSBrZXlGaWx0ZXIua2V5KTtcbiAgICBpZiAoZm91bmRJbmRleCA+PSAwKSB7XG4gICAgICAvLyB1cGRhdGVGaWx0ZXIgZnJvbSBoZWFkZXJcbiAgICAgIHRoaXMuZmlsdGVySGVhZGVyW2ZvdW5kSW5kZXhdLnZhbHVlID0ga2V5RmlsdGVyLnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZpbHRlckhlYWRlci5wdXNoKHtrZXk6IGtleUZpbHRlci5rZXksIHZhbHVlOiBrZXlGaWx0ZXIudmFsdWV9KTtcbiAgICB9XG4gICAgdGhpcy50YWJsZWRhdGEgPSB0aGlzLnJvd3M7XG4gICAgdGhpcy5maWx0ZXJIZWFkZXIuZm9yRWFjaCgoa2V5VmFsRmlsdGVyKSA9PiB7XG4gICAgICB0aGlzLnRhYmxlZGF0YSA9IHRoaXMudGFibGVkYXRhLmZpbHRlcigobykgPT4gKG9ba2V5VmFsRmlsdGVyLmtleV0gKyAnJykudG9Mb3dlckNhc2UoKS5pbmRleE9mKChrZXlWYWxGaWx0ZXIudmFsdWUgKyAnJykudG9Mb3dlckNhc2UoKSkgPj0gMCk7XG4gICAgfSk7XG4gICAgdGhpcy50YWJsZWRhdGFGaWx0ZXJlZCA9IHRoaXMudGFibGVkYXRhO1xuICB9XG5cbiAgc29ydENvbHVtbkZpbHRlcklucHV0KHNvcnQ6IHtkaXJlY3Rpb246IElTdGF0ZXMsIGtleTogc3RyaW5nfSkge1xuICAgIC8vIHBlcmZvcm1hbmNlIC0+IGRvIG5vdCBjYWxsIGFnYWluIHVwZGF0ZUZpbHRlcklucHV0IHJlYXNvbiBvbiBvcmlnaW5hbCBkYXRlbjtcbiAgICB0aGlzLnRhYmxlZGF0YSA9IFsuLi50aGlzLnRhYmxlZGF0YUZpbHRlcmVkXTtcblxuICAgIGNvbnN0IGZvdW5kSW5kZXggPSB0aGlzLnNvcnRIZWFkZXIuZmluZEluZGV4KChmKSA9PiBmLmtleSA9PT0gc29ydC5rZXkpO1xuICAgIGlmIChmb3VuZEluZGV4ID49IDApIHtcbiAgICAgIC8vIHVwZGF0ZUZpbHRlciBmcm9tIGhlYWRlclxuICAgICAgdGhpcy5zb3J0SGVhZGVyW2ZvdW5kSW5kZXhdLmRpcmVjdGlvbiA9IHNvcnQuZGlyZWN0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNvcnRIZWFkZXIucHVzaCh7a2V5OiBzb3J0LmtleSwgZGlyZWN0aW9uOiBzb3J0LmRpcmVjdGlvbn0pO1xuICAgIH1cbiAgICB0aGlzLnNvcnRIZWFkZXIgPSB0aGlzLnNvcnRIZWFkZXIuZmlsdGVyKChmKSA9PiBmLmRpcmVjdGlvbiAhPT0gSVN0YXRlcy5Ob3RoaW5nKTtcblxuICAgIGNvbnN0IHNvcnRCeUFsbEtleXMgPSAoYToge1trZXk6IHN0cmluZ106IGFueX0sIGI6IHtba2V5OiBzdHJpbmddOiBhbnl9KTogbnVtYmVyID0+IHtcbiAgICAgIGNvbnN0IGFycjogQXJyYXk8bnVtYmVyPiA9IFtdO1xuICAgICAgdGhpcy5zb3J0SGVhZGVyLmZvckVhY2goKHIpID0+IHtcbiAgICAgICAgbGV0IHJlcyA9IChhW3Iua2V5XSArICcnKVsnbG9jYWxlQ29tcGFyZSddKGJbci5rZXldICsgJycsICdkZScsIHsgbnVtZXJpYzogdHJ1ZSwgc2Vuc2l0aXZpdHk6ICdiYXNlJyB9KTtcbiAgICAgICAgcmVzID0gcmVzID09PSAwXG4gICAgICAgICAgPyByZXNcbiAgICAgICAgICA6IChyLmRpcmVjdGlvbiA9PT0gSVN0YXRlcy5CaWdnZXJUb1NtYWxsZXIgPyByZXMgKiAtMSA6IHJlcylcbiAgICAgICAgYXJyLnB1c2gocmVzKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFyclswXTsgLy8gYXJyLnNvbWUoKHMpID0+IHMgPT09IC0xKSA/IC0xIDogMTtcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuc29ydEhlYWRlci5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnRhYmxlZGF0YS5zb3J0KChhOiB7W2tleTogc3RyaW5nXTogYW55fSwgYjoge1trZXk6IHN0cmluZ106IGFueX0pID0+IHtcbiAgICAgICAgcmV0dXJuIHNvcnRCeUFsbEtleXMoYSwgYik7IC8vIChhW3NvcnQua2V5XSArICcnKVsnbG9jYWxlQ29tcGFyZSddKGJbc29ydC5rZXldICsgJycsICdkZScsIHsgbnVtZXJpYzogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuICAgICAgLy8gaWYgKHNvcnQuZGlyZWN0aW9uID09PSBJU3RhdGVzLkJpZ2dlclRvU21hbGxlcikge1xuICAgICAgLy8gICB0aGlzLnRhYmxlZGF0YS5yZXZlcnNlKCk7XG4gICAgICAvLyB9XG4gICAgfVxuICB9XG5cbiAgcG9zaXRpb25Sb3dzQ2hhbmdlZChkYXRhOiBBcnJheTx7W2tleTpzdHJpbmddOiBhbnl9Pik6IHZvaWQge1xuICAgIHRoaXMudGFibGVkYXRhID0gWy4uLmRhdGFdO1xuICAgIHRoaXMudGFibGVkYXRhRmlsdGVyZWQgPSBbLi4uZGF0YV07XG4gICAgdGhpcy5vbkNoYW5nZVBvc2l0aW9uUm93cy5lbWl0KGRhdGEpO1xuICAgIGRlYnVnZ2VyO1xuICB9XG5cbiAgb25IZWFkZXJTZWxlY3QoZXZlbnQ6IGFueSkge1xuXG4gIH1cbiAgb25Cb2R5UGFnZShldmVudDogYW55KSB7XG5cbiAgfVxuICBvbkJvZHlTZWxlY3QoZXZlbnQ6IGFueSkge1xuXG4gIH1cbiAgb25Cb2R5U2Nyb2xsKGV2ZW50OiBhbnkpIHtcblxuICB9XG4gIG9uRm9vdGVyUGFnZShldmVudDogYW55KSB7XG5cbiAgfVxuXG59XG4iLCI8ZGl2IGNsYXNzPVwicmVzcG9uc2l2ZV90YWJsZVwiPlxuXG4gIDxhcHAtdGFibGUtaGVhZGVyXG4gICAgW2NvbHVtbnNdPVwiX2ludGVybmFsQ29sdW1uc1wiXG4gICAgW2hlYWRlckhlaWdodF09XCJIRUlHSFRfSEVBREVSXCJcbiAgICBbYWxsUm93c1NlbGVjdGVkXT1cInNlbGVjdGVkXCJcbiAgICBbc2VsZWN0aW9uVHlwZV09XCJzZWxlY3Rpb25UeXBlXCJcbiAgICBbZHJvZ2dhYmxlQ29sdW1uc109XCJkcm9nZ2FibGVDb2x1bW5zXCJcbiAgICAoc2VsZWN0KT1cIm9uSGVhZGVyU2VsZWN0KCRldmVudClcIlxuICAgIChvbklucHV0VGV4dEtleSk9XCJ1cGRhdGVGaWx0ZXJJbnB1dCgkZXZlbnQpXCJcbiAgICAob25JbnB1dFNvcnRLZXkpPVwic29ydENvbHVtbkZpbHRlcklucHV0KCRldmVudClcIlxuICA+PC9hcHAtdGFibGUtaGVhZGVyPlxuICA8YXBwLXRhYmxlLWJvZHlcbiAgICBbY29uZmlnXT1cImNvbmZpZ1wiXG4gICAgW3Jvd3NdPVwidGFibGVkYXRhXCJcbiAgICBbc2Nyb2xsYmFyVl09XCJjb25maWcuc2Nyb2xsVlwiXG4gICAgW3Njcm9sbGJhckhdPVwiY29uZmlnLnNjcm9sbEhcIlxuICAgIFtsb2FkaW5nSW5kaWNhdG9yXT1cImNvbmZpZy5zaG93TG9hZGluZ1wiXG4gICAgW3Jvd0hlaWdodF09XCJjb25maWcucm93SGVpZ2h0XCJcbiAgICBbcm93Q291bnRdPVwidGFibGVkYXRhRmlsdGVyZWQ/Lmxlbmd0aCArICcnXCJcbiAgICBbY29sdW1uc109XCJfaW50ZXJuYWxDb2x1bW5zXCJcbiAgICBbcGFnZVNpemVdPVwicGFnZVNpemVcIlxuICAgIFtyb3dEZXRhaWxdPVwicm93RGV0YWlsXCJcbiAgICBbcm93Q2xhc3NdPVwicm93Q2xhc3NcIlxuICAgIFtzZWxlY3RlZF09XCJzZWxlY3RlZFwiXG4gICAgW2Ryb2dnYWJsZVJvd3NdPVwiZHJvZ2dhYmxlUm93c1wiXG4gICAgKG9uQ2hhbmdlUG9zaXRpb25Sb3dzKT1cInBvc2l0aW9uUm93c0NoYW5nZWQoJGV2ZW50KVwiXG4gICAgKHBhZ2UpPVwib25Cb2R5UGFnZSgkZXZlbnQpXCJcbiAgICAoc2VsZWN0KT1cIm9uQm9keVNlbGVjdCgkZXZlbnQpXCJcbiAgICAoc2Nyb2xsKT1cIm9uQm9keVNjcm9sbCgkZXZlbnQpXCJcbiAgPjwvYXBwLXRhYmxlLWJvZHk+XG4gIDxhcHAtdGFibGUtZm9vdGVyXG4gICAgW3Jvd0NvdW50XT1cInRhYmxlZGF0YUZpbHRlcmVkPy5sZW5ndGggKyAnJ1wiXG4gICAgW3BhZ2VTaXplXT1cInBhZ2VTaXplXCJcbiAgICBbZm9vdGVySGVpZ2h0XT1cIkhFSUdIVF9GT09URVJcIlxuICAgIFt0b3RhbE1lc3NhZ2VdPVwiY29uZmlnLm1lc3NhZ2VUYWJsZU5vRGF0YVwiXG4gICAgKHBhZ2UpPVwib25Gb290ZXJQYWdlKCRldmVudClcIlxuICA+PC9hcHAtdGFibGUtZm9vdGVyPlxuXG48IS0tICA8ZGl2ICpuZ0lmPVwiY29uZmlnLmRpc3BsYXlUYWJsZU5hbWVcIj4gJiM0NTsmIzQ1O05BbWUmIzQ1OyYjNDU7IDwvZGl2Pi0tPlxuXG48IS0tICA8bWF0LWRpdmlkZXI+PC9tYXQtZGl2aWRlcj4tLT5cbjwhLS0gIDxkaXYgY2xhc3M9XCJyZXNwb25zaXZlX3RhYmxlX2hlYWRlclwiIHN0eWxlPVwiaGVpZ2h0OiB7e0hFSUdIVF9IRUFERVJ9fVwiPi0tPlxuPCEtLSAgICA8bWF0LWRpdmlkZXIgdmVydGljYWw9XCJ0cnVlXCI+PC9tYXQtZGl2aWRlcj4tLT5cbjwhLS0gICAgPGFwcC1yZWFjdGl2ZS10YWJsZS1pbnB1dHMtZmlsdGVyIFthdHRyXT1cInN0cnVjdFwiLS0+XG48IS0tICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob25JbnB1dFRleHRLZXkpPVwidXBkYXRlRmlsdGVySW5wdXQoJGV2ZW50KVwiLS0+XG48IS0tICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob25JbnB1dFNvcnRLZXkpPVwic29ydENvbHVtbkZpbHRlcklucHV0KCRldmVudClcIi0tPlxuPCEtLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFkZEl0ZW0pPVwiYWRkSXRlbVByb3AuZW1pdCgpXCItLT5cbjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZWZyZXNoKT1cInJlZnJlc2hQcm9wLmVtaXQoKVwiLS0+XG48IS0tICAgID4tLT5cbjwhLS0gICAgPC9hcHAtcmVhY3RpdmUtdGFibGUtaW5wdXRzLWZpbHRlcj4tLT5cbjwhLS0gICAgPG1hdC1kaXZpZGVyIHZlcnRpY2FsPVwidHJ1ZVwiPjwvbWF0LWRpdmlkZXI+LS0+XG48IS0tICA8L2Rpdj4tLT5cblxuPCEtLSAgPGRpdiBjbGFzcz1cInJlc3BvbnNpdmVfdGFibGVfaGVhZGVyX2xvYWRpbmdcIiAqbmdJZj1cImNvbmZpZz8uc2hvd0xvYWRpbmcgJiYgIXJvd3NcIj4tLT5cbjwhLS0gICAgPG1hdC1kaXZpZGVyPjwvbWF0LWRpdmlkZXI+LS0+XG48IS0tICAgIDxtYXQtcHJvZ3Jlc3MtYmFyIG1vZGU9XCJpbmRldGVybWluYXRlXCI+PC9tYXQtcHJvZ3Jlc3MtYmFyPi0tPlxuPCEtLSAgPC9kaXY+LS0+XG5cbjwhLS0gIDxtYXQtZGl2aWRlcj48L21hdC1kaXZpZGVyPi0tPlxuXG48IS0tICA8ZGl2IGNsYXNzPVwicmVzcG9uc2l2ZV90YWJsZV9ib2R5XCI+LS0+XG48IS0tICAgIDxtYXQtZGl2aWRlciB2ZXJ0aWNhbD1cInRydWVcIj48L21hdC1kaXZpZGVyPi0tPlxuPCEtLSAgICA8YXBwLXJlYWN0aXZlLXRhYmxlLXJvdy1jZWxsIFtkYXRhXT1cInRhYmxlZGF0YVwiLS0+XG48IS0tICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2F0dHJdPVwic3RydWN0XCItLT5cbjwhLS0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob25DbGlja1Jvdyk9XCJjb25maWcub25TZWxlY3RSb3coJGV2ZW50KVwiLS0+XG48IS0tICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NvbmZpZ109XCJjb25maWdcIi0tPlxuPCEtLSAgICA+LS0+XG48IS0tICAgIDwvYXBwLXJlYWN0aXZlLXRhYmxlLXJvdy1jZWxsPi0tPlxuPCEtLSAgICA8bWF0LWRpdmlkZXIgdmVydGljYWw9XCJ0cnVlXCI+PC9tYXQtZGl2aWRlcj4tLT5cbjwhLS0gIDwvZGl2Pi0tPlxuXG48IS0tICA8bWF0LWRpdmlkZXI+PC9tYXQtZGl2aWRlcj4tLT5cbjwhLS0gIDxkaXYgKm5nSWY9XCIhY29uZmlnPy5kaXNwbGF5Rm9vdGVyID09PSBmYWxzZVwiIGNsYXNzPVwicmVzcG9uc2l2ZV90YWJsZV9mb290ZXJcIiBzdHlsZT1cImhlaWdodDoge3tIRUlHSFRfRk9PVEVSfX1cIj4tLT5cbjwhLS0gICAgPG1hdC1kaXZpZGVyIHZlcnRpY2FsPVwidHJ1ZVwiPjwvbWF0LWRpdmlkZXI+LS0+XG48IS0tICAgIDxhcHAtYXBwLXJlYWN0aXZlLXRhYmxlLWZvb3Rlcj48L2FwcC1hcHAtcmVhY3RpdmUtdGFibGUtZm9vdGVyPi0tPlxuPCEtLSAgICA8bWF0LWRpdmlkZXIgdmVydGljYWw9XCJ0cnVlXCIgc3R5bGU9XCJoZWlnaHQ6IDEwMCVcIj48L21hdC1kaXZpZGVyPi0tPlxuPCEtLSAgPC9kaXY+LS0+XG48IS0tICA8bWF0LWRpdmlkZXI+PC9tYXQtZGl2aWRlcj4tLT5cbjwvZGl2PlxuIl19